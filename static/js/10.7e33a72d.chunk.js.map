{"version":3,"sources":["features/register/map/index.js","features/register/containers/RegisterFormContainer.js","features/register/index.js","contracts/index.js","shared/utils/index.js","shared/auth/index.js","shared/element-dropdown/ElementSelector.js","features/register/components/DocumentField.js","features/register/components/LandForm.js","features/register/components/PortionForm.js","features/register/components/ProductActivitiesForm.js","features/register/components/ToastFeedback.js","features/register/components/ContractTermsForm.js","features/register/components/TransferOwnershipForm.js","shared/transaction-loader/index.js","shared/wallet/SeedPhraseForm.js","shared/wallet/index.js"],"names":["forms","LAND","component","props","initialValues","description","documents","validationSchema","object","shape","string","required","array","min","handleSubmit","handleFeedback","senderAddress","window","web3","eth","Contract","contracts","ABI","address","methods","register","send","from","then","result","catch","error","PORTION","land","number","divide","CONTRACT_TERMS","portion","price","duration","periodicity","expectedProduction","expMainActivityCost","expProdActivityCost","integer","today","Date","deadline","getFullYear","getMonth","getDay","getTime","defineTerms","TRANSFER_OWNERSHIP","length","sell","PRODUCT","registerProduct","PROD_ACTIVITIES","registerProductionActivity","MAINTENANCE_ACTIVITIES","registerMaintenance","connect","state","user","Selector","getUser","history","useHistory","useEffect","data","attributes","roles","indexOf","CERTIFIER","toString","push","PROFILE","useState","OPERATOR","currentForm","setCurrentForm","useMemo","Form","isOpen","setIsOpen","isLoading","setIsLoading","hasErrors","setHasErrors","form","useRef","setTimeout","onSubmit","useCallback","values","setSubmitting","resetForm","Storage","put","current","reset","undefined","username","Container","fluid","Row","className","Col","xl","sm","elements","type","disabled","currentElement","setCurrentElement","reference","userAddress","Register","withWallet","RegisterFormContainer","withAuthentication","REGISTER","Land","abi","Portion","Product","Maintenance","ProductionActivity","fetchLandsByOwner","setElements","setFetchErrors","landInstance","getByOwner","call","lands","forEach","id","index","getById","fetchPortionsByOwner","portionInstance","fetchPortionsByBuyer","getByBuyer","buyer","AuthComponent","requestUser","isError","size","color","to","pathname","SIGNIN","ElementSelector","toggle","onClick","value","choices","map","DropdownItem","key","Dropdown","DropdownToggle","caret","block","DropdownMenu","DocumentField","touched","errors","setFieldValue","isSubmitting","handleFileChange","event","persist","currentTarget","files","name","reader","FileReader","addEventListener","readAsDataURL","Input","valid","onChange","FormText","LandForm","handleChange","innerRef","noValidate","FormGroup","Label","for","PortionForm","fetchErrors","Alert","element","ProductActivitiesForm","getTotal","total","parseInt","i","ToastFeedback","ToastSuccess","Toast","style","position","bottom","right","ToastHeader","icon","faCheck","ToastBody","ToastError","faTimes","ContractTermsForm","InputGroup","InputGroupAddon","addonType","faEuroSign","TransferOwnership","placeholder","TransactionLoader","animated","SeedPhraseForm","phrase","Component","currentProvider","constructor","isHDWalletProvider","setIsHDWalletProvider","setErrors","provider","HDWalletProvider","mnemonic","providerOrUrl","shareNonce","getAddresses","includes","toLowerCase","setProvider","message","matches"],"mappings":"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","file":"static/js/10.7e33a72d.chunk.js","sourcesContent":["import React from 'react';\nimport { object, string, number, array } from 'yup';\n\nimport {\n\tLandForm,\n\tPortionForm,\n\tProductActivitiesForm,\n\tContractTermsForm,\n\tTransferOwnershipForm\n} from '../components';\nimport {\n\tLAND,\n\tPORTION,\n\tPRODUCT,\n\tPROD_ACTIVITIES,\n\tMAINTENANCE_ACTIVITIES,\n\tCONTRACT_TERMS, TRANSFER_OWNERSHIP\n} from '../../../shared/values';\n\nimport contracts from '../../../contracts';\n\nconst forms = {\n\t[LAND]: {\n\t\tcomponent: (props) => <LandForm {...props} />,\n\t\tinitialValues: {\n\t\t\tdescription: '',\n\t\t\tdocuments: []\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio'),\n\t\t\tdocuments: array().min(1, 'Inserire un allegato')\n\t\t}),\n\t\thandleSubmit: ({ description, documents }, handleFeedback, senderAddress) => {\n\t\t\tconst landInstance = new window.web3.eth.Contract(contracts[LAND].ABI, contracts[LAND].address);\n\n\t\t\tlandInstance.methods.register(description, documents[3], documents[2])\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[PORTION]: {\n\t\tcomponent: (props) => <PortionForm {...props} />,\n\t\tinitialValues: {\n\t\t\tland: '',\n\t\t\tdescription: '',\n\t\t\tdocuments: []\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tland: number().required('Selezionare il terreno al quale appartiene la porzione'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio'),\n\t\t\tdocuments: array().min(1, 'Inserire un allegato')\n\t\t}),\n\t\thandleSubmit: ({ land, description, documents }, handleFeedback, senderAddress) => {\n\t\t\tconst landInstance = new window.web3.eth.Contract(contracts[LAND].ABI, contracts[LAND].address);\n\n\t\t\tlandInstance.methods.divide(land, description, documents[3], documents[2], contracts[PORTION].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[CONTRACT_TERMS]: {\n\t\tcomponent: (props) => <ContractTermsForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\tprice: '',\n\t\t\tduration: '',\n\t\t\tperiodicity: '',\n\t\t\texpectedProduction: '',\n\t\t\texpMainActivityCost: '',\n\t\t\texpProdActivityCost: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione relativa'),\n\t\t\tprice: number().required('Il costo relativo al contratto è obbligatorio'),\n\t\t\tduration: number()\n\t\t\t\t.min(0, 'Il dato deve essere maggiore o uguale a 0')\n\t\t\t\t.integer('Il dato deve essere un numero intero').required('Le informazioni sulla durata del contratto sono obbligatorie'),\n\t\t\tperiodicity: string().required('Inserire la periodicità della produzione attesa'),\n\t\t\texpectedProduction: string().required('Le informazioni sulla produzione attesa sono obbligatorie'),\n\t\t\texpMainActivityCost: number().required('I costi attesi per le attività di manutenzione sono obbligatori'),\n\t\t\texpProdActivityCost: number().required('I costi attesi per la produzione sono obbligatori')\n\t\t}),\n\t\thandleSubmit: ({ portion, price, duration, expectedProduction, periodicity, expMainActivityCost, expProdActivityCost }, handleFeedback, senderAddress) => {\n\t\t\tconst today = new Date();\n\t\t\tconst deadline = duration ?\n\t\t\t\tnew Date(today.getFullYear() + duration, today.getMonth(), today.getDay()).getTime() : 0;\n\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\t\t\tportionInstance.methods.defineTerms(\n\t\t\t\tportion,\n\t\t\t\tprice * 100,\n\t\t\t\tdeadline,\n\t\t\t\texpectedProduction,\n\t\t\t\tperiodicity,\n\t\t\t\texpMainActivityCost * 100,\n\t\t\t\texpProdActivityCost * 100)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[TRANSFER_OWNERSHIP]: {\n\t\tcomponent: (props) => <TransferOwnershipForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\taddress: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terra relativa'),\n\t\t\taddress: string()\n\t\t\t\t.required('Inserire l\\'indirizzo')\n\t\t\t\t.length(42, 'L\\'address è lungo esattamente 42 caratteri'),\n\t\t}),\n\t\thandleSubmit: ({ portion, address }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\t\t\tportionInstance.methods.sell(\n\t\t\t\tportion,\n\t\t\t\taddress\n\t\t\t)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[PRODUCT]: {\n\t\tcomponent: (props) => <ProductActivitiesForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terreno alla quale appartiene il prodotto'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio')\n\t\t}),\n\t\thandleSubmit: ({ portion, description }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\n\t\t\tportionInstance.methods.registerProduct(description, portion, contracts[PRODUCT].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t});\n\t\t}\n\t},\n\t[PROD_ACTIVITIES]: {\n\t\tcomponent: (props) => <ProductActivitiesForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terreno alla quale appartiene l\\'attività di produzione'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio')\n\t\t}),\n\t\thandleSubmit: ({ portion, description }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\n\t\t\tportionInstance.methods.registerProductionActivity(description, portion, contracts[PROD_ACTIVITIES].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[MAINTENANCE_ACTIVITIES]: {\n\t\tcomponent: (props) => <ProductActivitiesForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terreno alla quale appartiene l\\'attività di manutenzione'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio')\n\t\t}),\n\t\thandleSubmit: ({ portion, description }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\n\t\t\tportionInstance.methods.registerMaintenance(description, portion, contracts[MAINTENANCE_ACTIVITIES].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport { forms };\n","import React, { useMemo, useState, useCallback, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux'\n\nimport { Container, Row, Col } from 'reactstrap';\nimport { Formik } from 'formik';\nimport Storage from '@aws-amplify/storage';\n\nimport { ToastFeedback } from '../components';\nimport { ElementSelector } from '../../../shared/element-dropdown';\nimport TransactionLoader from '../../../shared/transaction-loader';\n\nimport {\n\tLAND,\n\tPORTION,\n\tPRODUCT,\n\tPROD_ACTIVITIES,\n\tMAINTENANCE_ACTIVITIES,\n\tCONTRACT_TERMS,\n\tTRANSFER_OWNERSHIP, OPERATOR, roles, CERTIFIER\n} from '../../../shared/values';\nimport { forms } from '../map';\nimport { Selector } from '../../../store/user/reducer';\nimport { useHistory } from 'react-router-dom';\nimport { PROFILE } from '../../../config/routes';\n\n/**\n * Container for elements registration.\n *\n * @param user\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst RegisterFormContainer = ({ user }) => {\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tif(user.data) {\n\t\t\tconst { attributes } = user.data;\n\t\t\tif (attributes['custom:role'] === roles.indexOf(CERTIFIER).toString()) {\n\t\t\t\thistory.push(PROFILE);\n\t\t\t}\n\t\t}\n\t}, [user, history]);\n\n\tconst [currentForm, setCurrentForm] = useState(\n\t\tuser.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString() ? PRODUCT : LAND\n\t);\n\tconst { component: Form, initialValues, validationSchema, handleSubmit } = useMemo(() => forms[currentForm], [currentForm]);\n\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [hasErrors, setHasErrors] = useState(false);\n\n\tconst form = useRef(null);\n\n\tuseEffect(() => {\n\t\tif (hasErrors && isOpen) {\n\t\t\tsetTimeout(() => setHasErrors(false), 5000);\n\t\t}\n\t}, [hasErrors, setHasErrors, isOpen])\n\n\tconst onSubmit = useCallback((values, { setSubmitting, resetForm }) => {\n\t\tsetIsLoading(true);\n\n\t\tif (values.documents && values.documents.length && !hasErrors) {\n\t\t\tStorage.put(values.documents[1], values.documents[0])\n\t\t\t\t.then((result) => {})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tsetHasErrors(true);\n\t\t\t\t});\n\t\t}\n\n\t\tconst handleFeedback = (hasErrors) => {\n\t\t\tif ((currentForm === LAND || currentForm === PORTION) && form.current) {\n\t\t\t\tform.current.reset();\n\t\t\t}\n\t\t\tresetForm(initialValues);\n\t\t\tsetSubmitting(false);\n\n\t\t\tsetHasErrors(hasErrors);\n\t\t\tsetIsOpen(true);\n\t\t\tsetIsLoading(false);\n\t\t}\n\n\t\tif(!hasErrors) {\n\t\t\thandleSubmit({\n\t\t\t\t...values,\n\t\t\t\t...values.documents && values.documents.length ? {\n\t\t\t\t\tdocuments: [\n\t\t\t\t\t\t...values.documents,\n\t\t\t\t\t\t`https://psab-documents225914-dev.s3.amazonaws.com/public/${values.documents[1]}`\n\t\t\t\t\t]\n\t\t\t\t} : undefined\n\t\t\t}, handleFeedback, user.data.username);\n\t\t} else {\n\t\t\thandleFeedback(hasErrors);\n\t\t}\n\t}, [currentForm, initialValues, handleSubmit, hasErrors, user]);\n\n\treturn (\n\t\t<>\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"justify-content-between align-items-center\">\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<h1>Registra {currentForm}</h1>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xl={5} sm={12} className=\"justify-content-center\">\n\t\t\t\t\t\t<ElementSelector\n\t\t\t\t\t\t\telements={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: LAND,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: PORTION,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: CONTRACT_TERMS,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: TRANSFER_OWNERSHIP,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: PRODUCT,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] !== roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: PROD_ACTIVITIES,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] !== roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: MAINTENANCE_ACTIVITIES,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] !== roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tcurrentElement={currentForm}\n\t\t\t\t\t\t\tsetCurrentElement={setCurrentForm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t{isLoading && <TransactionLoader />}\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xl={12} sm={12}>\n\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\tinitialValues={initialValues}\n\t\t\t\t\t\t\tvalidationSchema={validationSchema}\n\t\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{props => <Form reference={form} userAddress={user.data.username} {...props}/>}\n\t\t\t\t\t\t</Formik>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t<ToastFeedback isOpen={isOpen} setIsOpen={setIsOpen} hasErrors={hasErrors} />\n\t</>\n\t);\n}\n\nconst mapStateToProps = (state) => ({\n\tuser: Selector.getUser(state)\n});\n\nRegisterFormContainer.propTypes = {\n\t/**\n\t * Current user details\n\t */\n\tuser: PropTypes.object\n}\n\nexport default connect(mapStateToProps)(RegisterFormContainer);\n","import RegisterFormContainer from './containers';\nimport { REGISTER } from '../../config/routes';\n\nimport withAuthentication from '../../shared/auth';\nimport withWallet from '../../shared/wallet';\n\nconst Register = withWallet(RegisterFormContainer);\n\nexport default withAuthentication(Register, REGISTER);\n","import Land from './Land.json';\nimport Portion from './Portion.json';\nimport Product from './Product.json';\nimport Maintenance from './Maintenance.json';\nimport ProductionActivity from './ProductionActivity.json';\n\nimport {\n\tLAND,\n\tPORTION,\n\tPRODUCT,\n\tPROD_ACTIVITIES,\n\tMAINTENANCE_ACTIVITIES\n} from '../shared/values';\n\nconst contracts = {\n\t[LAND]: {\n\t\tABI: Land.abi,\n\t\taddress: '0x5c6bafE9a2cA993568D16EA2B86902AA18e2547d'\n\t},\n\t[PORTION]: {\n\t\tABI: Portion.abi,\n\t\taddress: '0x4d03a40dd56a11C7455B9E6376fCA67254bEcf20'\n\t},\n\t[PRODUCT]: {\n\t\tABI: Product.abi,\n\t\taddress: '0xD00DD60f0A7851073ce5a33525F1828863Dc96E6'\n\t},\n\t[MAINTENANCE_ACTIVITIES]: {\n\t\tABI: Maintenance.abi,\n\t\taddress: '0x7be05F531Fb6bEB5170a6f05BD8D2D105ae0FCDb'\n\t},\n\t[PROD_ACTIVITIES]: {\n\t\tABI: ProductionActivity.abi,\n\t\taddress: '0xC15f75444a8BCa2F211ea82402E86cc3D2A17b58'\n\t}\n};\n\nexport default contracts;\n","import contracts from '../../contracts';\nimport { LAND, PORTION } from '../values';\n\nconst fetchLandsByOwner = (userAddress, setElements, setIsLoading, setFetchErrors) => {\n\tconst elements = [];\n\n\tconst landInstance = new window.web3.eth.Contract(contracts[LAND].ABI, contracts[LAND].address);\n\tlandInstance.methods.getByOwner(userAddress)\n\t\t.call({ from: userAddress })\n\t\t.then((lands) => {\n\t\t\tif (!lands.length) {\n\t\t\t\tsetElements(elements);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlands.forEach((id, index) => {\n\t\t\t\tlandInstance.methods.getById(id)\n\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\telements.push({\n\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (index === lands.length - 1) {\n\t\t\t\t\t\t\tsetElements(elements);\n\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tsetFetchErrors(true);\n\t\t\tsetIsLoading(false);\n\t\t});\n};\n\nconst fetchPortionsByOwner = (userAddress, setElements, setIsLoading, setFetchErrors) => {\n\tconst elements = [];\n\n\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\tportionInstance.methods.getByOwner(userAddress)\n\t\t.call({ from: userAddress })\n\t\t.then((result) => {\n\t\t\tif (!result.length) {\n\t\t\t\tsetElements([]);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult.forEach((id, index) => {\n\t\t\t\tportionInstance.methods.getById(id)\n\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t.then((portion) => {\n\t\t\t\t\t\telements.push(portion[0]);\n\t\t\t\t\t\tif (index === result.length - 1) {\n\t\t\t\t\t\t\tsetElements(elements);\n\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tsetIsLoading(false);\n\t\t\tsetFetchErrors(true);\n\t\t});\n}\n\nconst fetchPortionsByBuyer = (userAddress, setElements, setIsLoading, setFetchErrors) => {\n\tconst elements = [];\n\n\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\tportionInstance.methods.getByBuyer(userAddress)\n\t\t.call({ from: userAddress })\n\t\t.then((result) => {\n\t\t\tif (!result.length) {\n\t\t\t\tsetElements([]);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult.forEach((id, index) => {\n\t\t\t\tportionInstance.methods.getById(id)\n\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t.then((portion) => {\n\t\t\t\t\t\tif (portion[1].buyer === userAddress) {\n\t\t\t\t\t\t\telements.push(portion[0]);\n\t\t\t\t\t\t\tif (index === result.length - 1) {\n\t\t\t\t\t\t\t\tsetElements(elements);\n\t\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tsetIsLoading(false);\n\t\t\tsetFetchErrors(true);\n\t\t});\n}\n\nexport {\n\tfetchLandsByOwner,\n\tfetchPortionsByOwner,\n\tfetchPortionsByBuyer\n}\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\n\nimport { Col, Container, Row, Alert } from 'reactstrap';\nimport { StyledSpinner } from '../styled';\n\nimport { SIGNIN } from '../../config/routes';\n\nimport { requestUser } from '../../store/user/action';\nimport { Selector } from '../../store/user/reducer';\n\nconst withAuthentication = (AuthComponent, from) =>\n    connect((state) => ({ user: Selector.getUser(state) }), { requestUser })(\n        ({ requestUser, user: { data, isLoading, isError }}) => {\n            useEffect(() => {\n                if (!data) {\n                    requestUser();\n                }\n            }, [requestUser, data]);\n\n            if (isLoading) {\n                return (\n                    <Container fluid>\n                        <Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n                            <Col xl=\"auto\" sm=\"auto\">\n                                <StyledSpinner size=\"large\"/>\n                            </Col>\n                        </Row>\n                    </Container>\n                )\n            }\n\n            if (isError) {\n                return (\n                    <Container fluid>\n                        <Row className=\"justify-content-center align-content-center align-items-center\">\n                            <Col xl={12} sm={12}>\n                                <Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento dell'account</Alert>\n                            </Col>\n                        </Row>\n                    </Container>\n                )\n            }\n\n            if (data) {\n                return <AuthComponent />;\n            } else {\n                return <Redirect to={{\n                    pathname: SIGNIN,\n                    state: { from }\n                }} />\n            }\n        });\n\nexport default withAuthentication;\n","import React, { useState, useCallback, useMemo } from 'react';\n\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst ElementSelector = ({ elements, currentElement, setCurrentElement }) => {\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tconst toggle = useCallback(() => setIsOpen((isOpen) => !isOpen), [setIsOpen]);\n\tconst onClick = useCallback((value) => () => {\n\t\tsetCurrentElement(value);\n\t}, [setCurrentElement]);\n\n\tconst choices = useMemo(() => {\n\t\treturn elements.map((value, index) =>\n\t\t\t<DropdownItem disabled={value.disabled} onClick={onClick(value.type)} key={index}>{value.type}</DropdownItem>\n\t\t)\n\t}, [onClick, elements]);\n\n\treturn (\n\t\t<Dropdown\n\t\t\tisOpen={isOpen}\n\t\t\ttoggle={toggle}\n\t\t>\n\t\t\t<DropdownToggle caret block>\n\t\t\t\t{currentElement}\n\t\t\t</DropdownToggle>\n\t\t\t<DropdownMenu>\n\t\t\t\t{choices}\n\t\t\t</DropdownMenu>\n\t\t</Dropdown>\n\t)\n};\n\nexport default ElementSelector;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { FormText, Input, Row, Col } from 'reactstrap';\n\n/**\n * Custom field for handling document upload.\n *\n * @param touched\n * @param errors\n * @param setFieldValue\n * @param isSubmitting\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst DocumentField = ({\n\ttouched,\n\terrors,\n\tsetFieldValue,\n\tisSubmitting\n}) => {\n\tconst handleFileChange = useCallback((event) => {\n\t\tevent.persist();\n\n\t\tconst documents = [];\n\t\tif (event.currentTarget.files && event.currentTarget.files.length) {\n\t\t\tdocuments.push(event.currentTarget.files[0]);\n\t\t\tdocuments.push(documents[0].name);\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.addEventListener('load', () => {\n\t\t\t\tdocuments.push(reader.result);\n\t\t\t});\n\t\t\treader.readAsDataURL(documents[0]);\n\t\t}\n\n\t\tsetFieldValue('documents', documents);\n\t}, [setFieldValue]);\n\n\treturn (\n\t\t<Row className=\"my-3\" form>\n\t\t\t<Col>\n\t\t\t\t<Input valid={touched.documents && errors.documents} type=\"file\" name=\"documents\" id=\"documents\" onChange={handleFileChange} disabled={isSubmitting}/>\n\t\t\t\t{ errors.documents && <FormText color=\"danger\">{errors.documents}</FormText>}\n\t\t\t</Col>\n\t\t</Row>\n\t);\n};\n\nDocumentField.propTypes = {\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Field changes handling\n\t */\n\tsetFieldValue: PropTypes.func,\n\t/**\n\t * Form submission flag\n\t */\n\tisSubmitting: PropTypes.bool\n};\n\nexport default DocumentField;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label } from 'reactstrap';\n\nimport { StyledFilledButton } from '../../../shared/styled';\nimport DocumentField from './DocumentField';\n\n/**\n * Land registration form.\n *\n * @param reference\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param setFieldValue\n * @param resetForm\n * @param initialValues\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst LandForm = ({\n\treference,\n\tvalues,\n\ttouched,\n\terrors,\n\tisSubmitting,\n\thandleSubmit,\n\thandleChange,\n\tsetFieldValue,\n\tresetForm,\n\tinitialValues\n}) => {\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\treturn (\n\t\t<Form innerRef={reference} onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"description\">Descrizione</Label>\n\t\t\t\t<Input valid={touched.description && !errors.description} type=\"textarea\" name=\"description\" id=\"description\" onChange={handleChange} value={values.description}/>\n\t\t\t\t{ errors.description && <FormText color=\"danger\">{errors.description}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"documents\">Documenti</Label>\n\t\t\t\t<FormText>Deve essere caricato un documento al minimo</FormText>\n\t\t\t\t<DocumentField\n\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\tvalues={values}\n\t\t\t\t\terrors={errors}\n\t\t\t\t\thandleChange={handleChange}\n\t\t\t\t\ttouched={touched}\n\t\t\t\t/>\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n}\n\nLandForm.propTypes = {\n\t/**\n\t * Form reference\n\t */\n\treference: PropTypes.object,\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n}\n\nexport default LandForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label, Alert, Container, Row, Col } from 'reactstrap';\n\nimport DocumentField from './DocumentField';\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport { fetchLandsByOwner } from '../../../shared/utils';\n\n/**\n * Portion registration form.\n *\n * @param reference\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param setFieldValue\n * @param resetForm\n * @param initialValues\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst PortionForm = ({\n\treference,\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tsetFieldValue,\n\tresetForm,\n\tinitialValues,\n\tuserAddress\n}) => {\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tfetchLandsByOwner(userAddress, setElements, setIsLoading, setFetchErrors);\n\t}, [userAddress]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento dei terreni</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessun terreno disponibile per la suddivisione</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form innerRef={reference} onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"land\">Terreno da dividere</Label>\n\t\t\t\t<Input valid={touched.land && !errors.land} type=\"select\" name=\"land\" id=\"land\" onChange={handleChange} value={values.land}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={index}>{element.description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{ errors.land && <FormText color=\"danger\">{errors.land}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"description\">Descrizione</Label>\n\t\t\t\t<Input valid={touched.description && !errors.description} type=\"textarea\" name=\"description\" id=\"description\" onChange={handleChange} value={values.description}/>\n\t\t\t\t{ errors.description && <FormText color=\"danger\">{errors.description}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"documents\">Documenti</Label>\n\t\t\t\t<FormText>Deve essere caricato un documento al minimo</FormText>\n\t\t\t\t<DocumentField\n\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\tvalues={values}\n\t\t\t\t\terrors={errors}\n\t\t\t\t\thandleChange={handleChange}\n\t\t\t\t\ttouched={touched}\n\t\t\t\t/>\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nPortionForm.propTypes = {\n\t/**\n\t * Form reference\n\t */\n\treference: PropTypes.object,\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n};\n\nexport default PortionForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label, Alert, Container, Row, Col } from 'reactstrap';\n\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport contracts from '../../../contracts';\nimport { PORTION } from '../../../shared/values';\n\n/**\n * Product, production activities and maintenance activities registration form.\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param resetForm\n * @param initialValues\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst ProductActivitiesForm = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tresetForm,\n\tinitialValues,\n\tuserAddress\n}) => {\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tuseEffect(() => {\n\t\tconst elements = [];\n\n\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\t\tportionInstance.methods.getTotal()\n\t\t\t.call({ from : userAddress })\n\t\t\t.then((total) => {\n\t\t\t\ttotal = parseInt(total);\n\t\t\t\tif (!total) {\n\t\t\t\t\tsetElements(elements);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < total; i++) {\n\t\t\t\t\tportionInstance.methods.getById(i)\n\t\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\telements.push({\n\t\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\t\tid: i\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (i === total - 1) {\n\t\t\t\t\t\t\t\tsetElements(elements);\n\t\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tsetFetchErrors(true);\n\t\t\t\tsetIsLoading(false);\n\t\t\t});\n\t}, [userAddress]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento delle porzioni</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessuna porzione di terreno disponibile per registrare l'elemento</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"portion\">Porzione relativa all'oggetto della registrazione</Label>\n\t\t\t\t<Input valid={touched.portion && !errors.portion} type=\"select\" name=\"portion\" id=\"portion\" onChange={handleChange} value={values.portion} disabled={isSubmitting}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={index}>{element[0].description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{ errors.portion && <FormText color=\"danger\">{errors.portion}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"description\">Descrizione</Label>\n\t\t\t\t<Input valid={\n\t\t\t\t\ttouched.description && !errors.description} type=\"textarea\" name=\"description\" id=\"description\" onChange={handleChange} value={values.description} disabled={isSubmitting}/>\n\t\t\t\t{ errors.description && <FormText color=\"danger\">{errors.description}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nProductActivitiesForm.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n\t/**\n\t * Current user's Ethereum address\n\t */\n\tuserAddress: PropTypes.string\n};\n\nexport default ProductActivitiesForm;\n","import React, { useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Toast, ToastBody, ToastHeader } from 'reactstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons/faCheck';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons/faTimes';\n\n/**\n * Toast feedback for registration process.\n *\n * @param isOpen\n * @param setIsOpen\n * @param hasErrors\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst ToastFeedback = ({ isOpen, setIsOpen, hasErrors }) => {\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tif (isOpen) {\n\t\t\t\tsetIsOpen(false);\n\t\t\t}\n\t\t}, 5000);\n\t}, [isOpen, setIsOpen]);\n\n\tconst ToastSuccess = useCallback(() => (\n\t\t<Toast style={{ position: 'fixed', bottom: '10%', right: '10%' }} color=\"primary\" isOpen={isOpen}>\n\t\t\t<ToastHeader><FontAwesomeIcon icon={faCheck} color=\"#006D77\"/> Registrazione completata</ToastHeader>\n\t\t\t<ToastBody>L'elemento è stato aggiunto con successo</ToastBody>\n\t\t</Toast>\n\t), [isOpen]);\n\n\tconst ToastError = useCallback(() => (\n\t\t<Toast style={{ position: 'fixed', bottom: '10%', right: '10%' }} color=\"primary\" isOpen={isOpen}>\n\t\t\t<ToastHeader><FontAwesomeIcon icon={faTimes} color=\"#D9534F\"/> Si è verificato un errore durante la registrazione</ToastHeader>\n\t\t\t<ToastBody>L'elemento non è stato aggiunto</ToastBody>\n\t\t</Toast>\n\t), [isOpen]);\n\n\treturn hasErrors ? <ToastError /> : <ToastSuccess />;\n};\n\nToastFeedback.propTypes = {\n\t/**\n\t * Is toast open?\n\t */\n\tisOpen: PropTypes.bool,\n\t/**\n\t * Change open status\n\t */\n\tsetIsOpen: PropTypes.func,\n\t/**\n\t * Severity feedback\n\t */\n\thasErrors: PropTypes.bool\n};\n\nexport default ToastFeedback;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n\tForm,\n\tFormGroup,\n\tFormText,\n\tInput,\n\tLabel,\n\tInputGroup,\n\tInputGroupAddon,\n\tContainer,\n\tRow,\n\tCol,\n\tAlert\n} from 'reactstrap';\n\nimport { faEuroSign } from '@fortawesome/free-solid-svg-icons/faEuroSign';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport { fetchPortionsByOwner } from '../../../shared/utils';\n\n/**\n * Form for registering portion contract terms.\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param initialValues\n * @param resetForm\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst ContractTermsForm = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tinitialValues,\n\tresetForm,\n\tuserAddress\n}) => {\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tuseEffect(() => {\n\t\tfetchPortionsByOwner(userAddress, setElements, setIsLoading, setFetchErrors);\n\t}, [userAddress, setElements, setIsLoading, setFetchErrors]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento delle porzioni di terreno</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessuna porzione di terreno disponibile per il trasferimento di proprietà o per la vendita</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"portion\">Porzione relativa</Label>\n\t\t\t\t<Input valid={touched.portion && !errors.portion} type=\"select\" name=\"portion\" id=\"portion\" onChange={handleChange} value={values.portion} disabled={isSubmitting}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={index}>{element.description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{ errors.portion && <FormText color=\"danger\">{errors.portion}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"price\">Prezzo</Label>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\" className=\"align-items-center mx-3\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faEuroSign} size=\"lg\"/>\n\t\t\t\t\t</InputGroupAddon>\n\t\t\t\t\t<Input valid={touched.price && !errors.price} type=\"number\" name=\"price\" id=\"price\" onChange={handleChange} value={values.price} disabled={isSubmitting}/>\n\t\t\t\t</InputGroup>\n\t\t\t\t{ errors.price && <FormText color=\"danger\">{errors.price}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"duration\">Durata</Label>\n\t\t\t\t<Input valid={touched.duration && !errors.duration} type=\"number\" name=\"duration\" id=\"duration\" onChange={handleChange} value={values.duration} disabled={isSubmitting}/>\n\t\t\t\t<FormText>Inserire 0 se perpetuo, altrimenti indicare il numero di anni</FormText>\n\t\t\t\t{ errors.duration && <FormText color=\"danger\">{errors.duration}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"expectedProduction\">Produzione attesa</Label>\n\t\t\t\t<Input valid={touched.expectedProduction && !errors.expectedProduction} type=\"text\" name=\"expectedProduction\" id=\"expectedProduction\" onChange={handleChange} value={values.expectedProduction} disabled={isSubmitting}/>\n\t\t\t\t{ errors.expectedProduction && <FormText color=\"danger\">{errors.expectedProduction}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"periodicity\">Periodicità</Label>\n\t\t\t\t<Input valid={touched.periodicity && !errors.periodicity} type=\"text\" name=\"periodicity\" id=\"periodicity\" onChange={handleChange} value={values.periodicity}/>\n\t\t\t\t<FormText>Ogni estate, ...</FormText>\n\t\t\t\t{ errors.periodicity && <FormText color=\"danger\">{errors.periodicity}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"expMainActivityCost\">Costi di manutenzione attesi</Label>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\" className=\"align-items-center mx-3\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faEuroSign} size=\"lg\"/>\n\t\t\t\t\t</InputGroupAddon>\n\t\t\t\t\t<Input valid={touched.expMainActivityCost && !errors.expMainActivityCost} type=\"number\" name=\"expMainActivityCost\" id=\"expMainActivityCost\" onChange={handleChange} value={values.expMainActivityCost} disabled={isSubmitting}/>\n\t\t\t\t</InputGroup>\n\t\t\t\t{ errors.expMainActivityCost && <FormText color=\"danger\">{errors.expMainActivityCost}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"expProdActivityCost\">Costi di produzione attesi</Label>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\" className=\"align-items-center mx-3\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faEuroSign} size=\"lg\"/>\n\t\t\t\t\t</InputGroupAddon>\n\t\t\t\t\t<Input valid={touched.expProdActivityCost && !errors.expProdActivityCost} type=\"number\" name=\"expProdActivityCost\" id=\"expProdActivityCost\" onChange={handleChange} value={values.expProdActivityCost} disabled={isSubmitting}/>\n\t\t\t\t</InputGroup>\n\t\t\t\t{ errors.expProdActivityCost && <FormText color=\"danger\">{errors.expProdActivityCost}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nContractTermsForm.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Current user's address\n\t */\n\tuserAddress: PropTypes.string\n}\n\nexport default ContractTermsForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Col, Container, Form, FormGroup, FormText, Input, Label, Row } from 'reactstrap';\n\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport { fetchPortionsByBuyer, fetchPortionsByOwner } from '../../../shared/utils';\n\n/**\n * Form for selling portion or transfer its ownership.\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param resetForm\n * @param initialValues\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst TransferOwnership = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tresetForm,\n\tinitialValues,\n\tuserAddress\n}) => {\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tuseEffect(() => {\n\t\tfetchPortionsByOwner(userAddress, setElements, setIsLoading, setFetchErrors);\n\t\tfetchPortionsByBuyer(userAddress, setElements, setIsLoading, setFetchErrors);\n\t}, [userAddress, setElements, setIsLoading, setFetchErrors]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento delle porzioni di terreno</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessuna porzione di terreno disponibile per il trasferimento di proprietà o per la vendita</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"portion\">Porzione relativa</Label>\n\t\t\t\t<Input valid={touched.portion && !errors.portion} type=\"select\" name=\"portion\" id=\"portion\" onChange={handleChange} value={values.portion} disabled={isSubmitting}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={index}>{element.description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{ errors.portion && <FormText color=\"danger\">{errors.portion}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"address\">Address</Label>\n\t\t\t\t<Input valid={touched.address && !errors.address} type=\"text\" name=\"address\" id=\"address\" placeholder=\"0xa1b2c3d4e5f6...\" onChange={handleChange} value={values.address} disabled={isSubmitting}/>\n\t\t\t\t{ errors.address && <FormText color=\"danger\">{errors.address}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tTrasferisci\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nTransferOwnership.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n\t/**\n\t * Ethereum address\n\t */\n\tuserAddress: PropTypes.string\n};\n\nexport default TransferOwnership;\n","import React from 'react';\nimport { Col, Container, Row, Progress } from 'reactstrap';\n\nconst TransactionLoader = () => (\n\t<Container fluid>\n\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t<Col xl=\"12\" sm=\"12\">\n\t\t\t\t<Progress animated value=\"100\" className=\"progress-bar-custom\" />\n\t\t\t</Col>\n\t\t</Row>\n\t</Container>\n);\n\nexport default TransactionLoader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label } from 'reactstrap';\n\nimport { StyledFilledButton } from '../styled';\n\n/**\n * Wallet Seed Phrase management\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst SeedPhraseForm = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange\n}) => (\n\t<Form onSubmit={handleSubmit} noValidate>\n\t\t<FormGroup>\n\t\t\t<Label for=\"phrase\">Seed Phrase</Label>\n\t\t\t<Input valid={touched.phrase && !errors.phrase} type=\"textarea\" name=\"phrase\" id=\"phrase\" onChange={handleChange} value={values.phrase}/>\n\t\t\t{errors.phrase && <FormText color=\"danger\">{errors.phrase}</FormText>}\n\t\t\t<FormText>Inserire la frase composta da 12 parole utilizzata per sbloccare il wallet</FormText>\n\t\t</FormGroup>\n\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\tConferma\n\t\t</StyledFilledButton>\n\t</Form>\n);\n\nSeedPhraseForm.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func\n}\n\nexport default SeedPhraseForm;\n","import React, { useCallback, useState } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Formik } from 'formik';\nimport { string, object, number } from 'yup';\nimport { Col, Container, Row } from 'reactstrap';\nimport HDWalletProvider from '@truffle/hdwallet-provider';\n\nimport SeedPhraseForm from './SeedPhraseForm';\nimport { Selector } from '../../store/user/reducer';\n\nconst withWallet = (Component) =>\n\tconnect((state) => ({ user: Selector.getUser(state) }))(\n\t\t({ user: { data: { username } }}) => {\n\t\tconst [isHDWalletProvider, setIsHDWalletProvider] = useState(window.web3.currentProvider.constructor.name === 'HDWalletProvider');\n\n\t\tconst onSubmit = useCallback(({ phrase }, { setSubmitting, setErrors }) => {\n\t\t\tsetSubmitting(false);\n\n\t\t\ttry {\n\t\t\t\tconst provider = new HDWalletProvider({\n\t\t\t\t\tmnemonic: phrase,\n\t\t\t\t\tproviderOrUrl: 'https://goerli.infura.io/v3/2825ef3aeb9047b7ab6e108500f89b60',\n\t\t\t\t\t// providerOrUrl: 'http://localhost:7545',\n\t\t\t\t\tshareNonce: false\n\t\t\t\t});\n\n\t\t\t\tif (!provider.getAddresses().includes(username.toLowerCase())) {\n\t\t\t\t\tsetErrors({ phrase: 'L\\'address dell\\'account non è incluso in questo wallet' });\n\t\t\t\t} else {\n\t\t\t\t\twindow.web3.setProvider(provider);\n\t\t\t\t\tsetIsHDWalletProvider(true);\n\t\t\t\t}\n\t\t\t} catch(error) {\n\t\t\t\tsetErrors({ phrase: error.message });\n\t\t\t}\n\t\t}, [username, setIsHDWalletProvider]);\n\n\t\tif (!isHDWalletProvider) {\n\t\t\treturn (\n\t\t\t\t<Container fluid>\n\t\t\t\t\t<Row className=\"justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t\t<Col xl={8} sm={8}>\n\t\t\t\t\t\t\t<h3>Seed Phrase</h3>\n\t\t\t\t\t\t\t<p>Inserire la Seed Phrase del proprio wallet per continuare</p>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row className=\"justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t\t<Col xl={8} sm={8}>\n\t\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\t\tinitialValues={{ phrase: '', index: 0 }}\n\t\t\t\t\t\t\t\tvalidationSchema={object().shape(({\n\t\t\t\t\t\t\t\t\tindex: number()\n\t\t\t\t\t\t\t\t\t\t.min(0, 'L\\'indice deve essere maggiore o uguale a 0')\n\t\t\t\t\t\t\t\t\t\t.integer('L\\'indice deve essere un numero intero')\n\t\t\t\t\t\t\t\t\t\t.required('Inserire l\\'indice dell\\'address'),\n\t\t\t\t\t\t\t\t\tphrase: string()\n\t\t\t\t\t\t\t\t\t\t.required('Inserire la seed phrase.')\n\t\t\t\t\t\t\t\t\t\t.matches(/([a-z]*){12}/, 'La frase deve contenere esattamente 12 parole')\n\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{props => <SeedPhraseForm {...props}/>}\n\t\t\t\t\t\t\t</Formik>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Container>\n\t\t\t);\n\t\t} else {\n\t\t\treturn <Component />;\n\t\t}\n\t});\n\nexport default withWallet;\n"],"sourceRoot":""}