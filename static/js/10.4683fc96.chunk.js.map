{"version":3,"sources":["features/register/map/index.js","features/register/containers/RegisterFormContainer.js","features/register/index.js","contracts/index.js","shared/utils/index.js","shared/auth/index.js","shared/element-dropdown/ElementSelector.js","features/register/components/LandForm.js","features/register/components/PortionForm.js","features/register/components/ProductActivitiesForm.js","features/register/utils/index.js","features/register/components/DocumentField.js","features/register/components/ToastFeedback.js","features/register/components/ContractTermsForm.js","features/register/components/TransferOwnershipForm.js","features/register/components/DocumentForm.js","shared/transaction-loader/index.js","shared/wallet/SeedPhraseForm.js","shared/wallet/index.js"],"names":["addMethod","string","this","test","value","path","createError","length","window","web3","eth","defaultAccount","credentials","then","result","getUserRole","getIdToken","getJwtToken","user","parseInt","UserAttributes","Value","roles","indexOf","USER","Boolean","catch","error","message","toString","forms","DOCUMENTS","component","props","initialValues","element","LAND","id","document","validationSchema","object","shape","required","number","name","file","mixed","base64","handleSubmit","handleFeedback","senderAddress","Contract","contracts","ABI","address","methods","registerDocument","utils","fromAscii","keccak256","send","from","Storage","put","description","register","PORTION","land","divide","CONTRACT_TERMS","portion","price","duration","periodicity","expectedProduction","expMainActivityCost","expProdActivityCost","min","integer","today","Date","deadline","getFullYear","getMonth","getDate","getTime","defineTerms","TRANSFER_OWNERSHIP","sell","PRODUCT","registerProduct","PROD_ACTIVITIES","registerProductionActivity","MAINTENANCE_ACTIVITIES","registerMaintenance","connect","state","Selector","getUser","history","useHistory","useEffect","data","attributes","OPERATOR","push","PROFILE","useState","currentForm","setCurrentForm","useMemo","Form","isOpen","setIsOpen","isLoading","setIsLoading","hasErrors","setHasErrors","form","useRef","setTimeout","onSubmit","useCallback","values","setSubmitting","resetForm","current","reset","username","Container","fluid","Row","className","Col","xl","sm","elements","type","disabled","currentElement","setCurrentElement","reference","userAddress","Register","withWallet","RegisterFormContainer","withAuthentication","REGISTER","Land","Portion","Product","Maintenance","ProductionActivity","fetchLandsByOwner","setElements","setFetchErrors","landInstance","getByOwner","call","lands","forEach","index","getById","fetchPortionsByOwner","portionInstance","fetchPortionsByBuyer","getByBuyer","buyer","AuthComponent","requestUser","isError","size","color","to","pathname","SIGNIN","ElementSelector","toggle","onClick","choices","map","DropdownItem","key","Dropdown","DropdownToggle","caret","block","DropdownMenu","LandForm","touched","errors","isSubmitting","handleChange","innerRef","noValidate","FormGroup","Label","for","Input","valid","onChange","FormText","PortionForm","fetchErrors","Alert","ProductActivitiesForm","getTotal","total","i","createDocumentName","old","ulid","now","split","DocumentField","setFieldValue","handleFileChange","event","persist","files","currentTarget","reader","FileReader","addEventListener","readAsDataURL","xs","ToastFeedback","ToastSuccess","Toast","style","position","bottom","right","ToastHeader","icon","faCheck","ToastBody","ToastError","faTimes","ContractTermsForm","placeholder","InputGroup","InputGroupAddon","addonType","faEuroSign","TransferOwnership","DocumentForm","TransactionLoader","animated","SeedPhraseForm","phrase","Component","currentProvider","constructor","isHDWalletProvider","setIsHDWalletProvider","setErrors","provider","HDWalletProvider","mnemonic","providerOrUrl","shareNonce","getAddresses","includes","toLowerCase","setProvider","matches"],"mappings":"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","file":"static/js/10.4683fc96.chunk.js","sourcesContent":["import React from 'react';\nimport { object, string, number, mixed, addMethod } from 'yup';\nimport Storage from '@aws-amplify/storage';\n\nimport {\n\tLandForm,\n\tPortionForm,\n\tProductActivitiesForm,\n\tContractTermsForm,\n\tTransferOwnershipForm,\n\tDocumentForm\n} from '../components';\nimport {\n\tLAND,\n\tPORTION,\n\tPRODUCT,\n\tPROD_ACTIVITIES,\n\tMAINTENANCE_ACTIVITIES,\n\tCONTRACT_TERMS,\n\tTRANSFER_OWNERSHIP,\n\tDOCUMENTS,\n\tUSER,\n\troles\n} from '../../../shared/values';\n\nimport contracts from '../../../contracts';\nimport { credentials, getUserRole } from '../../../api/user';\n\naddMethod(string, 'user', function () {\n\treturn this.test('user', 'Address non valido per effettuare questo tipo di operazione', function (value) {\n\t\tconst { path, createError } = this;\n\n\t\tif (!value || !value.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window.web3.eth.defaultAccount === value) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn credentials() // TODO: improve\n\t\t\t.then((result) => {\n\t\t\t\treturn getUserRole(value, result.getIdToken().getJwtToken())\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tif (result.user) {\n\t\t\t\t\t\t\tconst user = result.user;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tparseInt(user.UserAttributes[2].Value) === roles.indexOf(USER) &&\n\t\t\t\t\t\t\t\t!Boolean(parseInt(user.UserAttributes[3].Value))\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => createError({ path, message: error.toString() }));\n\t\t\t})\n\t\t\t.catch((error) => createError({ path, message: error.toString() }));\n\t});\n});\n\nconst forms = {\n\t[DOCUMENTS]: {\n\t\tcomponent: (props) => <DocumentForm {...props} />,\n\t\tinitialValues : {\n\t\t\telement: LAND,\n\t\t\tid: '',\n\t\t\tdocument: {}\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\telement: string().required('Selezionare l\\'elemento per il quale si vuole registrare il documento'),\n\t\t\tid: number().required('Selezionare un terreno o una porzione a cui allegare il documento'),\n\t\t\tdocument: object().shape({\n\t\t\t\tname: string().required('Inserire un allegato'),\n\t\t\t\tfile: mixed().required('Inserire un allegato'),\n\t\t\t\tbase64: string().required('Inserire un allegato')\n\t\t\t})\n\t\t}),\n\t\thandleSubmit: ({ element, id, document: { name, file, base64 }}, handleFeedback, senderAddress) => {\n\t\t\tconst instance = new window.web3.eth.Contract(contracts[element].ABI, contracts[element].address);\n\n\t\t\tinstance.methods.registerDocument(id, window.web3.utils.fromAscii(name), window.web3.utils.keccak256(base64))\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\tStorage.put(name, file)\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\thandleFeedback(false);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\thandleFeedback(true);\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[LAND]: {\n\t\tcomponent: (props) => <LandForm {...props} />,\n\t\tinitialValues: {\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio'),\n\t\t}),\n\t\thandleSubmit: ({ description }, handleFeedback, senderAddress) => {\n\t\t\tconst landInstance = new window.web3.eth.Contract(contracts[LAND].ABI, contracts[LAND].address);\n\n\t\t\tlandInstance.methods.register(description)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[PORTION]: {\n\t\tcomponent: (props) => <PortionForm {...props} />,\n\t\tinitialValues: {\n\t\t\tland: '',\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tland: number().required('Selezionare il terreno al quale appartiene la porzione'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio')\n\t\t}),\n\t\thandleSubmit: ({ land, description }, handleFeedback, senderAddress) => {\n\t\t\tconst landInstance = new window.web3.eth.Contract(contracts[LAND].ABI, contracts[LAND].address);\n\n\t\t\tlandInstance.methods.divide(land, description, contracts[PORTION].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[CONTRACT_TERMS]: {\n\t\tcomponent: (props) => <ContractTermsForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\taddress: '',\n\t\t\tprice: '',\n\t\t\tduration: '',\n\t\t\tperiodicity: '',\n\t\t\texpectedProduction: '',\n\t\t\texpMainActivityCost: '',\n\t\t\texpProdActivityCost: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione relativa'),\n\t\t\taddress: string()\n\t\t\t\t.required('Inserire l\\'indirizzo')\n\t\t\t\t.length(42, 'L\\'address è lungo esattamente 42 caratteri')\n\t\t\t\t.user(),\n\t\t\tprice: number().required('Il costo relativo al contratto è obbligatorio'),\n\t\t\tduration: number()\n\t\t\t\t.min(0, 'Il dato deve essere maggiore o uguale a 0')\n\t\t\t\t.integer('Il dato deve essere un numero intero').required('Le informazioni sulla durata del contratto sono obbligatorie'),\n\t\t\tperiodicity: string().required('Inserire la periodicità della produzione attesa'),\n\t\t\texpectedProduction: string().required('Le informazioni sulla produzione attesa sono obbligatorie'),\n\t\t\texpMainActivityCost: number().required('I costi attesi per le attività di manutenzione sono obbligatori'),\n\t\t\texpProdActivityCost: number().required('I costi attesi per la produzione sono obbligatori')\n\t\t}),\n\t\thandleSubmit: ({\n\t\t   portion,\n\t\t   price,\n\t\t   duration,\n\t\t   expectedProduction,\n\t\t   periodicity,\n\t\t   expMainActivityCost,\n\t\t   expProdActivityCost,\n\t\t   address\n\t\t}, handleFeedback, senderAddress) => {\n\t\t\tconst today = new Date();\n\t\t\tconst deadline = duration ?\n\t\t\t\tnew Date(today.getFullYear() + duration, today.getMonth(), today.getDate()).getTime() / 1000 : 0;\n\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\t\t\tportionInstance.methods.defineTerms(\n\t\t\t\tportion,\n\t\t\t\tprice * 100,\n\t\t\t\tdeadline,\n\t\t\t\texpectedProduction,\n\t\t\t\tperiodicity,\n\t\t\t\texpMainActivityCost * 100,\n\t\t\t\texpProdActivityCost * 100,\n\t\t\t\taddress,\n\t\t\t\t)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[TRANSFER_OWNERSHIP]: {\n\t\tcomponent: (props) => <TransferOwnershipForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\taddress: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terra relativa'),\n\t\t\taddress: string()\n\t\t\t\t.required('Inserire l\\'indirizzo')\n\t\t\t\t.length(42, 'L\\'address è lungo esattamente 42 caratteri')\n\t\t\t\t.user()\n\t\t}),\n\t\thandleSubmit: ({ portion, address }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\t\t\tportionInstance.methods.sell(\n\t\t\t\tportion,\n\t\t\t\taddress\n\t\t\t)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[PRODUCT]: {\n\t\tcomponent: (props) => <ProductActivitiesForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terreno alla quale appartiene il prodotto'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio')\n\t\t}),\n\t\thandleSubmit: ({ portion, description }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\n\t\t\tportionInstance.methods.registerProduct(description, portion, contracts[PRODUCT].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t});\n\t\t}\n\t},\n\t[PROD_ACTIVITIES]: {\n\t\tcomponent: (props) => <ProductActivitiesForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terreno alla quale appartiene l\\'attività di produzione'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio')\n\t\t}),\n\t\thandleSubmit: ({ portion, description }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\n\t\t\tportionInstance.methods.registerProductionActivity(description, portion, contracts[PROD_ACTIVITIES].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t},\n\t[MAINTENANCE_ACTIVITIES]: {\n\t\tcomponent: (props) => <ProductActivitiesForm {...props} />,\n\t\tinitialValues: {\n\t\t\tportion: '',\n\t\t\tdescription: ''\n\t\t},\n\t\tvalidationSchema: object().shape({\n\t\t\tportion: number().required('Selezionare la porzione di terreno alla quale appartiene l\\'attività di manutenzione'),\n\t\t\tdescription: string().required('Il campo descrizione è obbligatorio')\n\t\t}),\n\t\thandleSubmit: ({ portion, description }, handleFeedback, senderAddress) => {\n\t\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\n\t\t\tportionInstance.methods.registerMaintenance(description, portion, contracts[MAINTENANCE_ACTIVITIES].address)\n\t\t\t\t.send({ from: senderAddress })\n\t\t\t\t.then((result) => {\n\t\t\t\t\thandleFeedback(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\thandleFeedback(true);\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport { forms };\n","import React, { useMemo, useState, useCallback, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux'\n\nimport { Container, Row, Col } from 'reactstrap';\nimport { Formik } from 'formik';\n\nimport { ToastFeedback } from '../components';\nimport { ElementSelector } from '../../../shared/element-dropdown';\nimport TransactionLoader from '../../../shared/transaction-loader';\n\nimport {\n\tLAND,\n\tPORTION,\n\tPRODUCT,\n\tPROD_ACTIVITIES,\n\tMAINTENANCE_ACTIVITIES,\n\tCONTRACT_TERMS,\n\tTRANSFER_OWNERSHIP,\n\tDOCUMENTS,\n\tOPERATOR,\n\tUSER,\n\troles,\n} from '../../../shared/values';\nimport { forms } from '../map';\nimport { Selector } from '../../../store/user/reducer';\nimport { useHistory } from 'react-router-dom';\nimport { PROFILE } from '../../../config/routes';\n\n/**\n * Container for elements registration.\n *\n * @param user\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst RegisterFormContainer = ({ user }) => {\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tif(user.data) {\n\t\t\tconst { attributes } = user.data;\n\t\t\tif (!attributes['custom:role'] === roles.indexOf(OPERATOR).toString() && !attributes['custom:role'] === roles.indexOf(USER).toString()) {\n\t\t\t\thistory.push(PROFILE);\n\t\t\t}\n\t\t}\n\t}, [user, history]);\n\n\tconst [currentForm, setCurrentForm] = useState(\n\t\tuser.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString() ? PRODUCT : LAND\n\t);\n\tconst { component: Form, initialValues, validationSchema, handleSubmit } = useMemo(() => forms[currentForm], [currentForm]);\n\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst [hasErrors, setHasErrors] = useState(false);\n\n\tconst form = useRef(null);\n\n\tuseEffect(() => {\n\t\tif (hasErrors && isOpen) {\n\t\t\tsetTimeout(() => setHasErrors(false), 5000);\n\t\t}\n\t}, [hasErrors, setHasErrors, isOpen])\n\n\tconst onSubmit = useCallback((values, { setSubmitting, resetForm }) => {\n\t\tsetIsLoading(true);\n\n\t\tconst handleFeedback = (hasErrors) => {\n\t\t\tif (currentForm === DOCUMENTS && form.current) {\n\t\t\t\tform.current.reset();\n\t\t\t}\n\t\t\tresetForm(initialValues);\n\t\t\tsetSubmitting(false);\n\n\t\t\tsetHasErrors(hasErrors);\n\t\t\tsetIsOpen(true);\n\t\t\tsetIsLoading(false);\n\t\t}\n\n\t\thandleSubmit(values, handleFeedback, user.data.username);\n\t}, [currentForm, initialValues, handleSubmit, user]);\n\n\treturn (\n\t\t<>\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"justify-content-between align-items-center\">\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<h1>Registra {currentForm}</h1>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xl={5} sm={12} className=\"justify-content-center\">\n\t\t\t\t\t\t<ElementSelector\n\t\t\t\t\t\t\telements={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: LAND,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: PORTION,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: DOCUMENTS,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: CONTRACT_TERMS,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: TRANSFER_OWNERSHIP,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] === roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: PRODUCT,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] !== roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: PROD_ACTIVITIES,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] !== roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: MAINTENANCE_ACTIVITIES,\n\t\t\t\t\t\t\t\t\tdisabled: user.data.attributes['custom:role'] !== roles.indexOf(OPERATOR).toString()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tcurrentElement={currentForm}\n\t\t\t\t\t\t\tsetCurrentElement={setCurrentForm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t{isLoading && <TransactionLoader />}\n\t\t\t\t<Row>\n\t\t\t\t\t<Col xl={12} sm={12}>\n\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\tinitialValues={initialValues}\n\t\t\t\t\t\t\tvalidationSchema={validationSchema}\n\t\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{props => <Form reference={form} userAddress={user.data.username} {...props}/>}\n\t\t\t\t\t\t</Formik>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t<ToastFeedback isOpen={isOpen} setIsOpen={setIsOpen} hasErrors={hasErrors} />\n\t</>\n\t);\n}\n\nconst mapStateToProps = (state) => ({\n\tuser: Selector.getUser(state)\n});\n\nRegisterFormContainer.propTypes = {\n\t/**\n\t * Current user details\n\t */\n\tuser: PropTypes.object\n}\n\nexport default connect(mapStateToProps)(RegisterFormContainer);\n","import RegisterFormContainer from './containers';\nimport { REGISTER } from '../../config/routes';\n\nimport withAuthentication from '../../shared/auth';\nimport withWallet from '../../shared/wallet';\n\nconst Register = withWallet(RegisterFormContainer);\n\nexport default withAuthentication(Register, REGISTER);\n","import { abi as Land } from './Land.json';\nimport { abi as Portion } from './Portion.json';\nimport { abi as Product } from './Product.json';\nimport { abi as Maintenance } from './Maintenance.json';\nimport { abi as ProductionActivity } from './ProductionActivity.json';\n\nimport {\n\tLAND,\n\tPORTION,\n\tPRODUCT,\n\tPROD_ACTIVITIES,\n\tMAINTENANCE_ACTIVITIES\n} from '../shared/values';\n\nconst contracts = {\n\t[LAND]: {\n\t\tABI: Land,\n\t\taddress: '0x1F1dD176d02f3eC0a5A444ae2d808C5c4969D5c2'\n\t},\n\t[PORTION]: {\n\t\tABI: Portion,\n\t\taddress: '0x0f7F02290EE5Dc190C53Fb69e99Dd2E051fcB492'\n\t},\n\t[PRODUCT]: {\n\t\tABI: Product,\n\t\taddress: '0xd597f7187ED5Cef012B001288ce44640812f8a6D'\n\t},\n\t[MAINTENANCE_ACTIVITIES]: {\n\t\tABI: Maintenance,\n\t\taddress: '0x98C2b634A061F09616ED69051cFCf6d4459Cadf5'\n\t},\n\t[PROD_ACTIVITIES]: {\n\t\tABI: ProductionActivity,\n\t\taddress: '0x3C88235AEad3D15fAcaBb0Fd630fb530396bF97b'\n\t}\n};\n\nexport default contracts;\n","import contracts from '../../contracts';\nimport { LAND, PORTION } from '../values';\n\nconst fetchLandsByOwner = (userAddress, setElements, setIsLoading, setFetchErrors) => {\n\tsetIsLoading(true);\n\n\tconst landInstance = new window.web3.eth.Contract(contracts[LAND].ABI, contracts[LAND].address);\n\tlandInstance.methods.getByOwner(userAddress)\n\t\t.call({ from: userAddress })\n\t\t.then((lands) => {\n\t\t\tif (!lands.length) {\n\t\t\t\tsetElements([]);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlands.forEach((id, index) => {\n\t\t\t\tlandInstance.methods.getById(id)\n\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tsetElements((elements) => ([\n\t\t\t\t\t\t\t...elements, {\n\t\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}]));\n\n\t\t\t\t\t\tif (index === lands.length - 1) {\n\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tsetFetchErrors(true);\n\t\t\tsetIsLoading(false);\n\t\t});\n};\n\nconst fetchPortionsByOwner = (userAddress, setElements, setIsLoading, setFetchErrors) => {\n\tsetIsLoading(true);\n\n\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\tportionInstance.methods.getByOwner(userAddress)\n\t\t.call({ from: userAddress })\n\t\t.then((result) => {\n\t\t\tif (!result.length) {\n\t\t\t\tsetElements([]);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult.forEach((id, index) => {\n\t\t\t\tportionInstance.methods.getById(id)\n\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t.then((portion) => {\n\t\t\t\t\t\tsetElements((elements) => ([\n\t\t\t\t\t\t\t...elements, {\n\t\t\t\t\t\t\t\t...portion[0],\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t}]));\n\n\t\t\t\t\t\tif (index === result.length - 1) {\n\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tsetIsLoading(false);\n\t\t\tsetFetchErrors(true);\n\t\t});\n}\n\nconst fetchPortionsByBuyer = (userAddress, setElements, setIsLoading, setFetchErrors) => {\n\tsetIsLoading(true);\n\n\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\tportionInstance.methods.getByBuyer(userAddress)\n\t\t.call({ from: userAddress })\n\t\t.then((result) => {\n\t\t\tif (!result.length) {\n\t\t\t\tsetElements([]);\n\t\t\t\tsetIsLoading(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresult.forEach((id, index) => {\n\t\t\t\tportionInstance.methods.getById(id)\n\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t.then((portion) => {\n\t\t\t\t\t\tif (portion[1].buyer === userAddress) {\n\t\t\t\t\t\t\tsetElements((elements) => ([\n\t\t\t\t\t\t\t\t...elements, {\n\t\t\t\t\t\t\t\t\t...portion[0],\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t}]));\n\n\t\t\t\t\t\t\tif (index === result.length - 1) {\n\t\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t});\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tsetIsLoading(false);\n\t\t\tsetFetchErrors(true);\n\t\t});\n}\n\nexport {\n\tfetchLandsByOwner,\n\tfetchPortionsByOwner,\n\tfetchPortionsByBuyer\n}\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\n\nimport { Col, Container, Row, Alert } from 'reactstrap';\nimport { StyledSpinner } from '../styled';\n\nimport { SIGNIN } from '../../config/routes';\n\nimport { requestUser } from '../../store/user/action';\nimport { Selector } from '../../store/user/reducer';\n\nconst withAuthentication = (AuthComponent, from) =>\n    connect((state) => ({ user: Selector.getUser(state) }), { requestUser })(\n        ({ requestUser, user: { data, isLoading, isError }}) => {\n            useEffect(() => {\n                if (!data) {\n                    requestUser();\n                }\n            }, [requestUser, data]);\n\n            if (isLoading) {\n                return (\n                    <Container fluid>\n                        <Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n                            <Col xl=\"auto\" sm=\"auto\">\n                                <StyledSpinner size=\"large\"/>\n                            </Col>\n                        </Row>\n                    </Container>\n                )\n            }\n\n            if (isError) {\n                return (\n                    <Container fluid>\n                        <Row className=\"justify-content-center align-content-center align-items-center\">\n                            <Col xl={12} sm={12}>\n                                <Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento dell'account</Alert>\n                            </Col>\n                        </Row>\n                    </Container>\n                )\n            }\n\n            if (data) {\n                return <AuthComponent />;\n            } else {\n                return <Redirect to={{\n                    pathname: SIGNIN,\n                    state: { from }\n                }} />\n            }\n        });\n\nexport default withAuthentication;\n","import React, { useState, useCallback, useMemo } from 'react';\n\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst ElementSelector = ({ elements, currentElement, setCurrentElement }) => {\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tconst toggle = useCallback(() => setIsOpen((isOpen) => !isOpen), [setIsOpen]);\n\tconst onClick = useCallback((value) => () => {\n\t\tsetCurrentElement(value);\n\t}, [setCurrentElement]);\n\n\tconst choices = useMemo(() => {\n\t\treturn elements.map((value, index) =>\n\t\t\t<DropdownItem disabled={value.disabled} onClick={onClick(value.type)} key={index}>{value.type}</DropdownItem>\n\t\t)\n\t}, [onClick, elements]);\n\n\treturn (\n\t\t<Dropdown\n\t\t\tisOpen={isOpen}\n\t\t\ttoggle={toggle}\n\t\t>\n\t\t\t<DropdownToggle caret block>\n\t\t\t\t{currentElement}\n\t\t\t</DropdownToggle>\n\t\t\t<DropdownMenu>\n\t\t\t\t{choices}\n\t\t\t</DropdownMenu>\n\t\t</Dropdown>\n\t)\n};\n\nexport default ElementSelector;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label } from 'reactstrap';\n\nimport { StyledFilledButton } from '../../../shared/styled';\n\n/**\n * Land registration form.\n *\n * @param reference\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param resetForm\n * @param initialValues\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst LandForm = ({\n\treference,\n\tvalues,\n\ttouched,\n\terrors,\n\tisSubmitting,\n\thandleSubmit,\n\thandleChange,\n\tresetForm,\n\tinitialValues\n}) => {\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\treturn (\n\t\t<Form innerRef={reference} onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"description\">Descrizione</Label>\n\t\t\t\t<Input valid={touched.description && !errors.description} type=\"textarea\" name=\"description\" id=\"description\" onChange={handleChange} value={values.description}/>\n\t\t\t\t{errors.description && <FormText color=\"danger\">{errors.description}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n}\n\nLandForm.propTypes = {\n\t/**\n\t * Form reference\n\t */\n\treference: PropTypes.object,\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n}\n\nexport default LandForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label, Alert, Container, Row, Col } from 'reactstrap';\n\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport { fetchLandsByOwner } from '../../../shared/utils';\n\n/**\n * Portion registration form.\n *\n * @param reference\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param resetForm\n * @param initialValues\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst PortionForm = ({\n\treference,\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tresetForm,\n\tinitialValues,\n\tuserAddress\n}) => {\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tfetchLandsByOwner(userAddress, setElements, setIsLoading, setFetchErrors);\n\t}, [userAddress]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento dei terreni</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessun terreno disponibile per la suddivisione</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form innerRef={reference} onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"land\">Terreno da dividere</Label>\n\t\t\t\t<Input valid={touched.land && !errors.land} type=\"select\" name=\"land\" id=\"land\" onChange={handleChange} value={values.land} disabled={isSubmitting}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={element.id}>{element.id} - {element.description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{errors.land && <FormText color=\"danger\">{errors.land}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"description\">Descrizione</Label>\n\t\t\t\t<Input valid={touched.description && !errors.description} type=\"textarea\" name=\"description\" id=\"description\" onChange={handleChange} value={values.description}/>\n\t\t\t\t{errors.description && <FormText color=\"danger\">{errors.description}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nPortionForm.propTypes = {\n\t/**\n\t * Form reference\n\t */\n\treference: PropTypes.object,\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n};\n\nexport default PortionForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label, Alert, Container, Row, Col } from 'reactstrap';\n\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport contracts from '../../../contracts';\nimport { PORTION } from '../../../shared/values';\n\n/**\n * Product, production activities and maintenance activities registration form.\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param resetForm\n * @param initialValues\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst ProductActivitiesForm = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tresetForm,\n\tinitialValues,\n\tuserAddress\n}) => {\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tuseEffect(() => {\n\t\tconst portionInstance = new window.web3.eth.Contract(contracts[PORTION].ABI, contracts[PORTION].address);\n\t\tportionInstance.methods.getTotal()\n\t\t\t.call({ from : userAddress })\n\t\t\t.then((total) => {\n\t\t\t\ttotal = parseInt(total);\n\t\t\t\tif (!total) {\n\t\t\t\t\tsetElements([]);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < total; i++) {\n\t\t\t\t\tportionInstance.methods.getById(i)\n\t\t\t\t\t\t.call({ from: userAddress })\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\tsetElements((elements) => ([\n\t\t\t\t\t\t\t\t...elements, {\n\t\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\t\tid: i\n\t\t\t\t\t\t\t}]));\n\n\t\t\t\t\t\t\tif (i === total - 1) {\n\t\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tsetFetchErrors(true);\n\t\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tsetFetchErrors(true);\n\t\t\t\tsetIsLoading(false);\n\t\t\t});\n\t}, [userAddress]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento delle porzioni</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessuna porzione di terreno disponibile per registrare l'elemento</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"portion\">Porzione relativa all'oggetto della registrazione</Label>\n\t\t\t\t<Input valid={touched.portion && !errors.portion} type=\"select\" name=\"portion\" id=\"portion\" onChange={handleChange} value={values.portion} disabled={isSubmitting}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={element.id}>{element.id} - {element[0].description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{errors.portion && <FormText color=\"danger\">{errors.portion}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"description\">Descrizione</Label>\n\t\t\t\t<Input valid={\n\t\t\t\t\ttouched.description && !errors.description} type=\"textarea\" name=\"description\" id=\"description\" onChange={handleChange} value={values.description} disabled={isSubmitting}/>\n\t\t\t\t{errors.description && <FormText color=\"danger\">{errors.description}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nProductActivitiesForm.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n\t/**\n\t * Current user's Ethereum address\n\t */\n\tuserAddress: PropTypes.string\n};\n\nexport default ProductActivitiesForm;\n","import { ulid } from 'ulid';\n\nconst createDocumentName = (old) => {\n\tconst id = ulid(Date.now());\n\tconst split = old.split('.');\n\n\treturn `${id}.${split[split.length - 1]}`;\n}\n\nexport default createDocumentName;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { FormText, Input, Row, Col, Label } from 'reactstrap';\n\nimport createDocumentName from '../utils';\n\n/**\n * Custom field for handling document upload.\n *\n * @param touched\n * @param errors\n * @param setFieldValue\n * @param isSubmitting\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst DocumentField = ({\n\ttouched,\n\terrors,\n\tsetFieldValue,\n\tisSubmitting\n}) => {\n\tconst handleFileChange = useCallback((event) => {\n\t\tevent.persist();\n\n\t\tconst files = event.currentTarget.files;\n\t\tif (files && files.length) {\n\t\t\tconst file = files[0];\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.addEventListener('load', () => {\n\t\t\t\tconst base64 = reader.result;\n\n\t\t\t\tsetFieldValue('document', {\n\t\t\t\t\tfile,\n\t\t\t\t\tname: createDocumentName(file.name),\n\t\t\t\t\tbase64\n\t\t\t\t});\n\t\t\t});\n\t\t\treader.readAsDataURL(file);\n\t\t} else {\n\t\t\tsetFieldValue('document', {});\n\t\t}\n\t}, [setFieldValue]);\n\n\treturn (\n\t\t<>\n\t\t<Label for=\"documents\">Documenti</Label>\n\t\t<Row className=\"my-3\" form>\n\t\t\t<Col xl={12} xs={12}>\n\t\t\t\t<Input\n\t\t\t\t\tvalid={touched.document && errors.document}\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tname=\"document\"\n\t\t\t\t\tid=\"document\"\n\t\t\t\t\tonChange={handleFileChange}\n\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t/>\n\t\t\t\t{(errors.document && (errors.document.name || errors.document.file)) && (\n\t\t\t\t\t<FormText color=\"danger\">{errors.document.name || errors.document.file || errors.document.base64}</FormText>\n\t\t\t\t)}\n\t\t\t</Col>\n\t\t\t<Col>\n\t\t\t\t<FormText>Il documento è obbligatorio</FormText>\n\t\t\t</Col>\n\t\t</Row>\n\t\t</>\n\t);\n};\n\nDocumentField.propTypes = {\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Field changes handling\n\t */\n\tsetFieldValue: PropTypes.func,\n\t/**\n\t * Form submission flag\n\t */\n\tisSubmitting: PropTypes.bool\n};\n\nexport default DocumentField;\n","import React, { useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Toast, ToastBody, ToastHeader } from 'reactstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons/faCheck';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons/faTimes';\n\n/**\n * Toast feedback for registration process.\n *\n * @param isOpen\n * @param setIsOpen\n * @param hasErrors\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst ToastFeedback = ({ isOpen, setIsOpen, hasErrors }) => {\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tif (isOpen) {\n\t\t\t\tsetIsOpen(false);\n\t\t\t}\n\t\t}, 5000);\n\t}, [isOpen, setIsOpen]);\n\n\tconst ToastSuccess = useCallback(() => (\n\t\t<Toast style={{ position: 'fixed', bottom: '10%', right: '10%' }} color=\"primary\" isOpen={isOpen}>\n\t\t\t<ToastHeader><FontAwesomeIcon icon={faCheck} color=\"#006D77\"/> Registrazione completata</ToastHeader>\n\t\t\t<ToastBody>L'elemento è stato aggiunto con successo</ToastBody>\n\t\t</Toast>\n\t), [isOpen]);\n\n\tconst ToastError = useCallback(() => (\n\t\t<Toast style={{ position: 'fixed', bottom: '10%', right: '10%' }} color=\"primary\" isOpen={isOpen}>\n\t\t\t<ToastHeader><FontAwesomeIcon icon={faTimes} color=\"#D9534F\"/> Si è verificato un errore durante la registrazione</ToastHeader>\n\t\t\t<ToastBody>L'elemento non è stato aggiunto</ToastBody>\n\t\t</Toast>\n\t), [isOpen]);\n\n\treturn hasErrors ? <ToastError /> : <ToastSuccess />;\n};\n\nToastFeedback.propTypes = {\n\t/**\n\t * Is toast open?\n\t */\n\tisOpen: PropTypes.bool,\n\t/**\n\t * Change open status\n\t */\n\tsetIsOpen: PropTypes.func,\n\t/**\n\t * Severity feedback\n\t */\n\thasErrors: PropTypes.bool\n};\n\nexport default ToastFeedback;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n\tForm,\n\tFormGroup,\n\tFormText,\n\tInput,\n\tLabel,\n\tInputGroup,\n\tInputGroupAddon,\n\tContainer,\n\tRow,\n\tCol,\n\tAlert\n} from 'reactstrap';\n\nimport { faEuroSign } from '@fortawesome/free-solid-svg-icons/faEuroSign';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport { fetchPortionsByOwner } from '../../../shared/utils';\n\n/**\n * Form for registering portion contract terms.\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param initialValues\n * @param resetForm\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst ContractTermsForm = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tinitialValues,\n\tresetForm,\n\tuserAddress\n}) => {\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tuseEffect(() => {\n\t\t!isSubmitting && fetchPortionsByOwner(userAddress, setElements, setIsLoading, setFetchErrors);\n\t}, [userAddress, setElements, setIsLoading, setFetchErrors, isSubmitting]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento delle porzioni di terreno</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessuna porzione di terreno disponibile per il trasferimento di proprietà o per la vendita</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"portion\">Porzione relativa</Label>\n\t\t\t\t<Input valid={touched.portion && !errors.portion} type=\"select\" name=\"portion\" id=\"portion\" onChange={handleChange} value={values.portion} disabled={isSubmitting}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={element.id}>{element.id} - {element.description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{errors.portion && <FormText color=\"danger\">{errors.portion}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"address\">Address acquirente</Label>\n\t\t\t\t<Input valid={touched.address && !errors.address} type=\"text\" name=\"address\" id=\"address\" placeholder=\"0xa1b2c3d4e5f6...\" onChange={handleChange} value={values.address} disabled={isSubmitting}/>\n\t\t\t\t{errors.address && <FormText color=\"danger\">{errors.address}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"price\">Prezzo</Label>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\" className=\"align-items-center mx-3\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faEuroSign} size=\"lg\"/>\n\t\t\t\t\t</InputGroupAddon>\n\t\t\t\t\t<Input valid={touched.price && !errors.price} type=\"number\" name=\"price\" id=\"price\" onChange={handleChange} value={values.price} disabled={isSubmitting}/>\n\t\t\t\t</InputGroup>\n\t\t\t\t{errors.price && <FormText color=\"danger\">{errors.price}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"duration\">Durata</Label>\n\t\t\t\t<Input valid={touched.duration && !errors.duration} type=\"number\" name=\"duration\" id=\"duration\" onChange={handleChange} value={values.duration} disabled={isSubmitting}/>\n\t\t\t\t<FormText>Inserire 0 se perpetuo, altrimenti indicare il numero di anni</FormText>\n\t\t\t\t{errors.duration && <FormText color=\"danger\">{errors.duration}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"expectedProduction\">Produzione attesa</Label>\n\t\t\t\t<Input valid={touched.expectedProduction && !errors.expectedProduction} type=\"text\" name=\"expectedProduction\" id=\"expectedProduction\" onChange={handleChange} value={values.expectedProduction} disabled={isSubmitting}/>\n\t\t\t\t{errors.expectedProduction && <FormText color=\"danger\">{errors.expectedProduction}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"periodicity\">Periodicità</Label>\n\t\t\t\t<Input valid={touched.periodicity && !errors.periodicity} type=\"text\" name=\"periodicity\" id=\"periodicity\" onChange={handleChange} value={values.periodicity} disabled={isSubmitting}/>\n\t\t\t\t<FormText>Ogni estate, ...</FormText>\n\t\t\t\t{errors.periodicity && <FormText color=\"danger\">{errors.periodicity}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"expMainActivityCost\">Costi di manutenzione attesi</Label>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\" className=\"align-items-center mx-3\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faEuroSign} size=\"lg\"/>\n\t\t\t\t\t</InputGroupAddon>\n\t\t\t\t\t<Input valid={touched.expMainActivityCost && !errors.expMainActivityCost} type=\"number\" name=\"expMainActivityCost\" id=\"expMainActivityCost\" onChange={handleChange} value={values.expMainActivityCost} disabled={isSubmitting}/>\n\t\t\t\t</InputGroup>\n\t\t\t\t{errors.expMainActivityCost && <FormText color=\"danger\">{errors.expMainActivityCost}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"expProdActivityCost\">Costi di produzione attesi</Label>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<InputGroupAddon addonType=\"prepend\" className=\"align-items-center mx-3\">\n\t\t\t\t\t\t<FontAwesomeIcon icon={faEuroSign} size=\"lg\"/>\n\t\t\t\t\t</InputGroupAddon>\n\t\t\t\t\t<Input valid={touched.expProdActivityCost && !errors.expProdActivityCost} type=\"number\" name=\"expProdActivityCost\" id=\"expProdActivityCost\" onChange={handleChange} value={values.expProdActivityCost} disabled={isSubmitting}/>\n\t\t\t\t</InputGroup>\n\t\t\t\t{errors.expProdActivityCost && <FormText color=\"danger\">{errors.expProdActivityCost}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tAggiungi\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nContractTermsForm.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Current user's address\n\t */\n\tuserAddress: PropTypes.string\n}\n\nexport default ContractTermsForm;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Col, Container, Form, FormGroup, FormText, Input, Label, Row } from 'reactstrap';\n\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport { fetchPortionsByBuyer } from '../../../shared/utils';\n\n/**\n * Form for selling portion or transfer its ownership.\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param resetForm\n * @param initialValues\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst TransferOwnership = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange,\n\tresetForm,\n\tinitialValues,\n\tuserAddress\n}) => {\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tuseEffect(() => {\n\t\t!isSubmitting && fetchPortionsByBuyer(userAddress, setElements, setIsLoading, setFetchErrors);\n\t}, [userAddress, setElements, setIsLoading, setFetchErrors, isSubmitting]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t)\n\t}\n\n\tif (fetchErrors) {\n\t\treturn (\n\t\t\t<Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento delle porzioni di terreno</Alert>\n\t\t);\n\t}\n\n\tif (!elements.length) {\n\t\treturn (\n\t\t\t<Alert color=\"info\" className=\"my-3\">Nessuna porzione di terreno disponibile per il trasferimento di proprietà o per la vendita</Alert>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit} noValidate>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"portion\">Porzione relativa</Label>\n\t\t\t\t<Input valid={touched.portion && !errors.portion} type=\"select\" name=\"portion\" id=\"portion\" onChange={handleChange} value={values.portion} disabled={isSubmitting}>\n\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t{elements.map((element, index) => <option key={index} value={element.id}>{element.id} - {element.description}</option>)}\n\t\t\t\t</Input>\n\t\t\t\t{errors.portion && <FormText color=\"danger\">{errors.portion}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<FormGroup>\n\t\t\t\t<Label for=\"address\">Address</Label>\n\t\t\t\t<Input valid={touched.address && !errors.address} type=\"text\" name=\"address\" id=\"address\" placeholder=\"0xa1b2c3d4e5f6...\" onChange={handleChange} value={values.address} disabled={isSubmitting}/>\n\t\t\t\t{errors.address && <FormText color=\"danger\">{errors.address}</FormText>}\n\t\t\t</FormGroup>\n\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\tTrasferisci\n\t\t\t</StyledFilledButton>\n\t\t</Form>\n\t);\n};\n\nTransferOwnership.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n\t/**\n\t * Ethereum address\n\t */\n\tuserAddress: PropTypes.string\n};\n\nexport default TransferOwnership;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Col, Container, Form, FormGroup, FormText, Input, Label, Row } from 'reactstrap';\n\nimport DocumentField from './DocumentField';\nimport { StyledFilledButton, StyledSpinner } from '../../../shared/styled';\n\nimport { LAND, PORTION } from '../../../shared/values';\nimport { fetchLandsByOwner, fetchPortionsByOwner } from '../../../shared/utils';\n\n/**\n * Document registration form.\n *\n * @param reference\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @param setFieldValue\n * @param resetForm\n * @param initialValues\n * @param userAddress\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst DocumentForm = ({\n\treference,\n\tvalues,\n\ttouched,\n\terrors,\n\tisSubmitting,\n\thandleSubmit,\n\thandleChange,\n\tsetFieldValue,\n\tresetForm,\n\tinitialValues,\n\tuserAddress\n}) => {\n\tuseEffect(() => {\n\t\tresetForm(initialValues);\n\t}, [resetForm, initialValues]);\n\n\tconst [elements, setElements] = useState([]);\n\tconst [fetchErrors, setFetchErrors] = useState(false);\n\tconst [isLoading, setIsLoading] = useState(true);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(true);\n\t\tsetElements([]);\n\n\t\tswitch (values.element) {\n\t\t\tcase LAND:\n\t\t\t\tfetchLandsByOwner(userAddress, setElements, setIsLoading, setFetchErrors);\n\t\t\t\tbreak;\n\t\t\tcase PORTION:\n\t\t\t\tfetchPortionsByOwner(userAddress, setElements, setIsLoading, setFetchErrors);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tsetIsLoading(false);\n\t\t}\n\t}, [values.element, userAddress]);\n\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<Container fluid>\n\t\t\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t<Col xl=\"auto\" sm=\"auto\">\n\t\t\t\t\t\t<StyledSpinner size=\"large\"/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Container>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{!elements.length && <Alert color=\"info\" className=\"my-3\">Nessun elemento disponibile per la registrazione di documenti</Alert>}\n\t\t\t{fetchErrors && <Alert color=\"danger\" className=\"my-3\">Si è verificato un errore nel caricamento degli elementi</Alert>}\n\t\t\t<Form innerRef={reference} onSubmit={handleSubmit} noValidate>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<Label for=\"element\">Elemento per il quale registrare il documento</Label>\n\t\t\t\t\t<Input valid={touched.element && !errors.element} type=\"select\" name=\"element\" id=\"element\" onChange={handleChange} value={values.element} disabled={isSubmitting}>\n\t\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t\t<option value={LAND}>{LAND}</option>\n\t\t\t\t\t\t<option value={PORTION}>{PORTION}</option>\n\t\t\t\t\t</Input>\n\t\t\t\t\t{errors.element && <FormText color=\"danger\">{errors.element}</FormText>}\n\t\t\t\t</FormGroup>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<Label for=\"id\">{values.element}</Label>\n\t\t\t\t\t<Input valid={touched.id && !errors.id} type=\"select\" name=\"id\" id=\"id\" onChange={handleChange} value={values.id} disabled={isSubmitting}>\n\t\t\t\t\t\t<option value=\"\" />\n\t\t\t\t\t\t{elements.map((element, index) => <option key={index} value={element.id}>{element.id} - {element.description}</option>)}\n\t\t\t\t\t</Input>\n\t\t\t\t\t{errors.id && <FormText color=\"danger\">{errors.id}</FormText>}\n\t\t\t\t</FormGroup>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<DocumentField\n\t\t\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t\t\t\tsetFieldValue={setFieldValue}\n\t\t\t\t\t\tvalues={values}\n\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\thandleChange={handleChange}\n\t\t\t\t\t\ttouched={touched}\n\t\t\t\t\t/>\n\t\t\t\t</FormGroup>\n\t\t\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\t\t\tAggiungi\n\t\t\t\t</StyledFilledButton>\n\t\t\t</Form>\n\t\t</>\n\t);\n}\n\nDocumentForm.propTypes = {\n\t/**\n\t * Form reference\n\t */\n\treference: PropTypes.object,\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func,\n\t/**\n\t * Field specific setter\n\t */\n\tsetFieldValue: PropTypes.func,\n\t/**\n\t * Form values reset\n\t */\n\tresetForm: PropTypes.func,\n\t/**\n\t * Initial form values\n\t */\n\tinitialValues: PropTypes.object,\n}\n\nexport default DocumentForm;\n","import React from 'react';\nimport { Col, Container, Row, Progress } from 'reactstrap';\n\nconst TransactionLoader = () => (\n\t<Container fluid>\n\t\t<Row className=\"my-3 justify-content-center align-content-center align-items-center\">\n\t\t\t<Col xl=\"12\" sm=\"12\">\n\t\t\t\t<Progress animated value=\"100\" className=\"progress-bar-custom\" />\n\t\t\t</Col>\n\t\t</Row>\n\t</Container>\n);\n\nexport default TransactionLoader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Form, FormGroup, FormText, Input, Label } from 'reactstrap';\n\nimport { StyledFilledButton } from '../styled';\n\n/**\n * Wallet Seed Phrase management\n *\n * @param values\n * @param touched\n * @param errors\n * @param isSubmitting\n * @param handleSubmit\n * @param handleChange\n * @returns {JSX.Element}\n * @constructor\n * @component\n */\nconst SeedPhraseForm = ({\n    values,\n    touched,\n    errors,\n    isSubmitting,\n    handleSubmit,\n    handleChange\n}) => (\n\t<Form onSubmit={handleSubmit} noValidate>\n\t\t<FormGroup>\n\t\t\t<Label for=\"phrase\">Seed Phrase</Label>\n\t\t\t<Input valid={touched.phrase && !errors.phrase} type=\"textarea\" name=\"phrase\" id=\"phrase\" onChange={handleChange} value={values.phrase}/>\n\t\t\t{errors.phrase && <FormText color=\"danger\">{errors.phrase}</FormText>}\n\t\t\t<FormText>Inserire la frase composta da 12 parole utilizzata per sbloccare il wallet</FormText>\n\t\t</FormGroup>\n\t\t<StyledFilledButton type=\"submit\" disabled={isSubmitting}>\n\t\t\tConferma\n\t\t</StyledFilledButton>\n\t</Form>\n);\n\nSeedPhraseForm.propTypes = {\n\t/**\n\t * Form values\n\t */\n\tvalues: PropTypes.object,\n\t/**\n\t * Touched fields\n\t */\n\ttouched: PropTypes.object,\n\t/**\n\t * Errors in fields\n\t */\n\terrors: PropTypes.object,\n\t/**\n\t * Form submission\n\t */\n\tisSubmitting: PropTypes.bool,\n\t/**\n\t * Form submission handling\n\t */\n\thandleSubmit: PropTypes.func,\n\t/**\n\t * Field changes handling\n\t */\n\thandleChange: PropTypes.func\n}\n\nexport default SeedPhraseForm;\n","import React, { useCallback, useState } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Formik } from 'formik';\nimport { string, object, number } from 'yup';\nimport { Col, Container, Row } from 'reactstrap';\nimport HDWalletProvider from '@truffle/hdwallet-provider';\n\nimport SeedPhraseForm from './SeedPhraseForm';\nimport { Selector } from '../../store/user/reducer';\n\nconst withWallet = (Component) =>\n\tconnect((state) => ({ user: Selector.getUser(state) }))(\n\t\t({ user: { data: { username } }}) => {\n\t\tconst [isHDWalletProvider, setIsHDWalletProvider] = useState(window.web3.currentProvider.constructor.name === 'HDWalletProvider');\n\n\t\tconst onSubmit = useCallback(({ phrase }, { setSubmitting, setErrors }) => {\n\t\t\tsetSubmitting(false);\n\n\t\t\ttry {\n\t\t\t\tconst provider = new HDWalletProvider({\n\t\t\t\t\tmnemonic: phrase,\n\t\t\t\t\tproviderOrUrl: 'https://goerli.infura.io/v3/2825ef3aeb9047b7ab6e108500f89b60',\n\t\t\t\t\t// providerOrUrl: 'http://localhost:7545',\n\t\t\t\t\tshareNonce: false\n\t\t\t\t});\n\n\t\t\t\tif (!provider.getAddresses().includes(username.toLowerCase())) {\n\t\t\t\t\tsetErrors({ phrase: 'L\\'address dell\\'account non è incluso in questo wallet' });\n\t\t\t\t} else {\n\t\t\t\t\twindow.web3.setProvider(provider);\n\t\t\t\t\twindow.web3.eth.defaultAccount = username;\n\t\t\t\t\tsetIsHDWalletProvider(true);\n\t\t\t\t}\n\t\t\t} catch(error) {\n\t\t\t\tsetErrors({ phrase: error.message });\n\t\t\t}\n\t\t}, [username, setIsHDWalletProvider]);\n\n\t\tif (!isHDWalletProvider) {\n\t\t\treturn (\n\t\t\t\t<Container fluid>\n\t\t\t\t\t<Row className=\"justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t\t<Col xl={8} sm={8}>\n\t\t\t\t\t\t\t<h3>Seed Phrase</h3>\n\t\t\t\t\t\t\t<p>Inserire la Seed Phrase del proprio wallet per continuare</p>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row className=\"justify-content-center align-content-center align-items-center\">\n\t\t\t\t\t\t<Col xl={8} sm={8}>\n\t\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\t\tinitialValues={{ phrase: '', index: 0 }}\n\t\t\t\t\t\t\t\tvalidationSchema={object().shape(({\n\t\t\t\t\t\t\t\t\tindex: number()\n\t\t\t\t\t\t\t\t\t\t.min(0, 'L\\'indice deve essere maggiore o uguale a 0')\n\t\t\t\t\t\t\t\t\t\t.integer('L\\'indice deve essere un numero intero')\n\t\t\t\t\t\t\t\t\t\t.required('Inserire l\\'indice dell\\'address'),\n\t\t\t\t\t\t\t\t\tphrase: string()\n\t\t\t\t\t\t\t\t\t\t.required('Inserire la seed phrase.')\n\t\t\t\t\t\t\t\t\t\t.matches(/([a-z]*){12}/, 'La frase deve contenere esattamente 12 parole')\n\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{props => <SeedPhraseForm {...props}/>}\n\t\t\t\t\t\t\t</Formik>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</Container>\n\t\t\t);\n\t\t} else {\n\t\t\treturn <Component />;\n\t\t}\n\t});\n\nexport default withWallet;\n"],"sourceRoot":""}