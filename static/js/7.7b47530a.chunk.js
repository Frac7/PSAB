(this.webpackJsonppsab=this.webpackJsonppsab||[]).push([[7],{630:function(e,a,t){"use strict";t.r(a);var r=t(2),n=t.n(r),o=t(191),s=t(113),c=t(25),l=t(664),i=t(633),u=t(634),d=t(635),m=t(728),f=t(736),p=t(737),g=t(192),b=t(142),O=t(679),E=t(759),h=t(760),v=t(761),j=t(762),w=t(763),y=t(112),P=t(643),C=function(e){var a=e.values,t=e.touched,r=e.errors,o=e.isSubmitting,s=e.handleSubmit,c=e.handleChange;return n.a.createElement(E.a,{onSubmit:s,noValidate:!0},n.a.createElement(h.a,null,n.a.createElement(v.a,{for:"username"},"Nome"),n.a.createElement(j.a,{valid:t.name&&!r.name,type:"text",name:"name",id:"name",onChange:c,value:a.name}),r.name&&n.a.createElement(w.a,{color:"danger"},r.name)),n.a.createElement(h.a,null,n.a.createElement(v.a,{for:"address"},"Address"),n.a.createElement(j.a,{valid:t.address&&!r.address,type:"text",name:"address",id:"address",placeholder:"0xa1b2c3d4e5f6...",onChange:c,value:a.address}),r.address&&n.a.createElement(w.a,{color:"danger"},r.address)),n.a.createElement(h.a,null,n.a.createElement(v.a,{for:"email"},"E-mail"),n.a.createElement(j.a,{valid:t.email&&!r.email,type:"email",name:"email",id:"email",placeholder:"user@example.com",onChange:c,value:a.email}),r.email&&n.a.createElement(w.a,{color:"danger"},r.email)),n.a.createElement(h.a,null,n.a.createElement(v.a,{for:"password"},"Password"),n.a.createElement(j.a,{valid:t.email&&!r.password,type:"password",name:"password",id:"password",onChange:c,value:a.password}),n.a.createElement(w.a,null,"Almeno 8 caratteri, lettere maiuscole, lettere minuscole, caratteri speciali, numeri"),r.password&&n.a.createElement(w.a,{color:"danger"},r.password)),n.a.createElement(h.a,null,n.a.createElement(v.a,{for:"confirmPassword"},"Conferma password"),n.a.createElement(j.a,{valid:t.email&&!r.confirmPassword,type:"password",name:"confirmPassword",id:"confirmPassword",onChange:c,value:a.confirmPassword}),r.confirmPassword&&n.a.createElement(w.a,{color:"danger"},r.confirmPassword)),n.a.createElement(h.a,null,n.a.createElement(v.a,{for:"role"},"Ruolo"),n.a.createElement(j.a,{valid:t.role&&!r.role,type:"select",name:"role",id:"role",onChange:c,value:a.role},P.f.map((function(e,a){return n.a.createElement("option",{key:a,value:a},e)}))),r.role&&n.a.createElement(w.a,{color:"danger"},r.role)),n.a.createElement(y.b,{type:"submit",disabled:o},"Aggiungi"))},N=t(662),k={email:"",password:"",name:"",address:"",confirmPassword:"",role:0},T=Object(N.d)().shape({email:Object(N.f)().email("E-mail non valida").required("Inserire l'e-mail"),password:Object(N.f)().required("Inserire la password").min(8,"La password deve essere lunga almeno 8 caratteri"),confirmPassword:Object(N.f)().required("Inserire la conferma per la password").oneOf([Object(N.e)("password"),null],"Le due password non coincidono"),name:Object(N.f)().required("Inserire il nome"),address:Object(N.f)().required("Inserire l'indirizzo").length(42,"L'address \xe8 lungo esattamente 42 caratteri"),role:Object(N.c)().required("Inserire il ruolo del nuovo utente")}),M=t(114),x=t(35),A=Object(s.b)((function(e){return{user:M.a.getUser(e)}}))((function(e){var a=e.user.data.attributes["custom:is_admin"],t=Object(r.useState)(!1),s=Object(o.a)(t,2),E=s[0],h=s[1];Object(r.useEffect)((function(){E&&setTimeout((function(){return h(!1)}),5e3)}),[E]);var v=Object(c.g)();Object(r.useEffect)((function(){a||v.push(x.d)}),[a,v]);var j=Object(r.useCallback)((function(e,a){var t=e.name,r=e.email,n=e.address,o=e.password,s=e.role,c=a.setSubmitting,l=a.setErrors,i=a.resetForm,u={name:t,"custom:eth_address":n,"custom:role":s.toString(),"custom:is_admin":"0"};g.a.signUp({username:r,password:o,attributes:u}).then((function(e){console.log(e),c(!1),h(!0),i()})).catch((function(e){console.log(e),c(!1),l({role:e.message})}))}),[]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{fluid:!0},n.a.createElement(u.a,null,n.a.createElement(d.a,null,n.a.createElement("h1",null,"Aggiungi utente"))),n.a.createElement(u.a,null,n.a.createElement(d.a,{md:12},n.a.createElement(l.a,{initialValues:k,validationSchema:T,onSubmit:j},(function(e){return n.a.createElement(C,e)}))))),n.a.createElement(m.a,{style:{position:"fixed",bottom:"10%",right:"10%"},color:"primary",isOpen:E},n.a.createElement(f.a,null,n.a.createElement(b.a,{icon:O.faCheck,color:"#006D77"})," Utente registrato"),n.a.createElement(p.a,null,"L'utente \xe8 stato registrato correttamente")))})),S=t(646);a.default=Object(S.a)((function(){return n.a.createElement(A,null)}))},643:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"c",(function(){return n})),t.d(a,"e",(function(){return o})),t.d(a,"d",(function(){return s})),t.d(a,"b",(function(){return c})),t.d(a,"f",(function(){return l}));var r="Terreno",n="Porzione di terreno",o="Attivit\xe0 legate alla produzione",s="Prodotto",c="Attivit\xe0 di manutenzione",l=["Utente","Certificatore","Operatore"]},646:function(e,a,t){"use strict";var r=t(2),n=t.n(r),o=t(113),s=t(25),c=t(192),l=t(35),i=t(94),u=t(114);a.a=function(e){return Object(o.b)((function(e){return{user:u.a.getUser(e)}}),{loggedIn:i.a})((function(a){var t=a.loggedIn,o=a.user.data;return Object(r.useEffect)((function(){o||c.a.currentUserInfo().then((function(e){t({data:e})})).catch((function(e){return console.error(e)}))}),[t,o]),o?n.a.createElement(e,null):n.a.createElement(s.a,{to:l.f})}))}},648:function(e,a,t){"use strict";function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,"a",(function(){return r}))},679:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=[],n="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z";a.definition={prefix:"fas",iconName:"check",icon:[512,512,r,"f00c",n]},a.faCheck=a.definition,a.prefix="fas",a.iconName="check",a.width=512,a.height=512,a.ligatures=r,a.unicode="f00c",a.svgPathData=n},728:function(e,a,t){"use strict";var r=t(9),n=t(16),o=t(648),s=t(2),c=t.n(s),l=t(3),i=t.n(l),u=t(24),d=t.n(u),m=t(18),f=t(678);function p(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?p(Object(t),!0).forEach((function(a){Object(o.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var b={children:i.a.node,className:i.a.string,cssModule:i.a.object,fade:i.a.bool,isOpen:i.a.bool,tag:m.o,transition:i.a.shape(f.a.propTypes),innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},O={isOpen:!0,tag:"div",fade:!0,transition:g(g({},f.a.defaultProps),{},{unmountOnExit:!0})};function E(e){var a=e.className,t=e.cssModule,o=e.tag,s=e.isOpen,l=e.children,i=e.transition,u=e.fade,p=e.innerRef,b=Object(n.a)(e,["className","cssModule","tag","isOpen","children","transition","fade","innerRef"]),O=Object(m.k)(d()(a,"toast"),t),E=g(g(g({},f.a.defaultProps),i),{},{baseClass:u?i.baseClass:"",timeout:u?i.timeout:0});return c.a.createElement(f.a,Object(r.a)({},b,E,{tag:o,className:O,in:s,role:"alert",innerRef:p}),l)}E.propTypes=b,E.defaultProps=O,a.a=E},736:function(e,a,t){"use strict";var r=t(9),n=t(16),o=t(2),s=t.n(o),c=t(3),l=t.n(c),i=t(24),u=t.n(i),d=t(18),m={tag:d.o,icon:l.a.oneOfType([l.a.string,l.a.node]),wrapTag:d.o,toggle:l.a.func,className:l.a.string,cssModule:l.a.object,children:l.a.node,closeAriaLabel:l.a.string,charCode:l.a.oneOfType([l.a.string,l.a.number]),close:l.a.object},f=function(e){var a,t,o=e.className,c=e.cssModule,l=e.children,i=e.toggle,m=e.tag,f=e.wrapTag,p=e.closeAriaLabel,g=e.charCode,b=e.close,O=e.tagClassName,E=e.icon,h=Object(n.a)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close","tagClassName","icon"]),v=Object(d.k)(u()(o,"toast-header"),c);if(!b&&i){var j="number"===typeof g?String.fromCharCode(g):g;a=s.a.createElement("button",{type:"button",onClick:i,className:Object(d.k)("close",c),"aria-label":p},s.a.createElement("span",{"aria-hidden":"true"},j))}return"string"===typeof E?t=s.a.createElement("svg",{className:Object(d.k)("rounded text-"+E),width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img"},s.a.createElement("rect",{fill:"currentColor",width:"100%",height:"100%"})):E&&(t=E),s.a.createElement(f,Object(r.a)({},h,{className:v}),t,s.a.createElement(m,{className:Object(d.k)(u()(O,{"ml-2":null!=t}),c)},l),b||a)};f.propTypes=m,f.defaultProps={tag:"strong",wrapTag:"div",tagClassName:"mr-auto",closeAriaLabel:"Close",charCode:215},a.a=f},737:function(e,a,t){"use strict";var r=t(9),n=t(16),o=t(2),s=t.n(o),c=t(3),l=t.n(c),i=t(24),u=t.n(i),d=t(18),m={tag:d.o,className:l.a.string,cssModule:l.a.object,innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},f=function(e){var a=e.className,t=e.cssModule,o=e.innerRef,c=e.tag,l=Object(n.a)(e,["className","cssModule","innerRef","tag"]),i=Object(d.k)(u()(a,"toast-body"),t);return s.a.createElement(c,Object(r.a)({},l,{className:i,ref:o}))};f.propTypes=m,f.defaultProps={tag:"div"},a.a=f}}]);
//# sourceMappingURL=7.7b47530a.chunk.js.map