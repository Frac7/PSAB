(this.webpackJsonppsab=this.webpackJsonppsab||[]).push([[12],{634:function(e,t,a){"use strict";a.r(t);var n,c=a(2),l=a.n(c),r=a(147),m=a(640),i=a(641),s=a(642),u=a(776),o=a(118),E=a(772),f=a(773),g=function(e){var t=e.ElementWrapper,a=e.elements;return l.a.createElement(i.a,{className:"my-3"},l.a.createElement(s.a,{xl:12,sm:12},l.a.createElement(E.a,{flush:!0},a.map((function(e,a){return l.a.createElement(f.a,{key:a},l.a.createElement(t,e))})))))},b=a(668),j=a(148),d=a(648),O=a(32),p=a(660),y=a(649),h=(n={},Object(O.a)(n,j.c,(function(e){return l.a.createElement(p.b,e)})),Object(O.a)(n,j.f,(function(e){return l.a.createElement(p.c,e)})),Object(O.a)(n,j.g,(function(e){return l.a.createElement(p.a,Object.assign({},e,{element:j.g}))})),Object(O.a)(n,j.h,(function(e){return l.a.createElement(p.a,Object.assign({},e,{element:j.h}))})),Object(O.a)(n,j.d,(function(e){return l.a.createElement(p.a,Object.assign({},e,{element:j.d}))})),n),N=a(117),x=a(116),v=Object(o.b)((function(e){return{user:N.a.getUser(e)}}))((function(e){var t=e.user,a=Object(c.useState)(j.c),n=Object(r.a)(a,2),o=n[0],E=n[1],f=Object(c.useState)([]),O=Object(r.a)(f,2),p=O[0],N=O[1],v=Object(c.useState)(!1),k=Object(r.a)(v,2),C=k[0],S=k[1],w=Object(c.useState)(!0),I=Object(r.a)(w,2),D=I[0],B=I[1];return Object(c.useEffect)((function(){!function(e,t,a,n,c){var l=[],r=new window.web3.eth.Contract(y.a[c].ABI,y.a[c].address);r.methods.getTotal().call({from:e}).then((function(c){if(!(c=parseInt(c)))return t(l),a(!1),void n(!1);for(var m=function(m){r.methods.getById(m).call({from:e}).then((function(e){l.push(Object(d.a)(Object(d.a)({},e),{},{id:m})),m===c-1&&(t(l),a(!1),n(!1))})).catch((function(e){a(!0),n(!1)}))},i=0;i<c;i++)m(i)})).catch((function(e){a(!0),n(!1)}))}(t.data.username,N,S,B,o)}),[o,t]),l.a.createElement(m.a,{fluid:!0},l.a.createElement(i.a,{className:"justify-content-between align-items-center"},l.a.createElement(s.a,null,l.a.createElement("h1",null,"Esplora ",o)),l.a.createElement(s.a,{xl:5,sm:12,className:"justify-content-center"},l.a.createElement(b.a,{elements:[{type:j.c},{type:j.f},{type:j.h},{type:j.g},{type:j.d}],currentElement:o,setCurrentElement:E}))),D&&l.a.createElement(i.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(s.a,{xl:1,sm:1},l.a.createElement(x.e,{size:"large"}))),C&&l.a.createElement(i.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(s.a,{xl:12,sm:12},l.a.createElement(u.a,{color:"danger",className:"my-3"},"Si \xe8 verificato un errore nel caricamento degli elementi"))),!p.length&&l.a.createElement(i.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(s.a,{xl:12,sm:12},l.a.createElement(u.a,{color:"info",className:"my-3"},"Nessun elemento disponibile"))),l.a.createElement(g,{elements:p,ElementWrapper:h[o]}))})),k=a(39),C=a(657);t.default=Object(C.a)((function(){return l.a.createElement(v,null)}),k.c)},660:function(e,t,a){"use strict";a.d(t,"a",(function(){return M})),a.d(t,"c",(function(){return z})),a.d(t,"b",(function(){return y}));var n=a(147),c=a(2),l=a.n(c),r=a(640),m=a(641),i=a(642),s=a(116),u=a(648),o=a(32),E=a(118),f=a(785),g=a(774),b=a(775),j=a(776),d=a(772),O=a(773),p=Object(s.f)("h5"),y=function(e){var t=e.description,a=e.documents;return l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(p,null,"Descrizione")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},t))),a&&l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(p,null,"Documenti")),l.a.createElement(i.a,null,l.a.createElement(d.a,{flush:!0},l.a.createElement(O.a,{className:"text-success",tag:"a",href:a,target:"_blank"},"Documento allegato")))))},h=a(738),N=a(777),x=a(149),v=a(710),k=a(709),C=a(148),S=a(649),w=a(117),I=Object(s.f)("h5"),D=Object(E.b)((function(e){return{user:w.a.getUser(e)}}))((function(e){var t,a=e.id,E=e.isOpen,d=e.setIsOpen,O=e.user.data,p=O.username,y=(O.attributes,p),h=Object(c.useState)((t={},Object(o.a)(t,C.f,[]),Object(o.a)(t,C.g,[]),Object(o.a)(t,C.h,[]),Object(o.a)(t,C.d,[]),t)),N=Object(n.a)(h,2),x=N[0],v=N[1],k=Object(c.useState)(!1),w=Object(n.a)(k,2),D=w[0],B=w[1],z=Object(c.useState)(!1),P=Object(n.a)(z,2),F=P[0],A=P[1],U=Object(c.useCallback)((function(){d((function(e){return!e})),E||Object.keys(x).forEach((function(e){var t=e===C.f?"getBuyersByPortion":"getByPortion";B(!0);var n=new window.web3.eth.Contract(S.a[e].ABI,S.a[e].address);n.methods[t](a).call({from:y}).then((function(t){if(e===C.f)v((function(a){return Object(u.a)(Object(u.a)({},a),{},Object(o.a)({},e,t))}));else if(t.length){var a=[];t.forEach((function(c,l){n.methods.getById(c).call({from:y}).then((function(n){a.push(Object(u.a)(Object(u.a)({},n),{},{id:c})),l===t.length-1&&(v((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},e,a))})),B(!1))})).catch((function(e){A(!0),B(!1)}))}))}else B(!1)})).catch((function(e){A(!0),B(!1)}))}))}),[a,y,E,d,B,x,v]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{onClick:U},"Sfoglia cronologia"),l.a.createElement(f.a,{className:"modal-lg",isOpen:E,toggle:U},l.a.createElement(g.a,{toggle:U},"Dettagli Porzione #",a),l.a.createElement(b.a,null,D&&l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(i.a,{xl:1,sm:1},l.a.createElement(s.e,{size:"large"})))),F&&l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(i.a,{xl:12,sm:12},l.a.createElement(j.a,{color:"danger",className:"my-3"},"Si \xe8 verificato un errore nel caricamento degli elementi")))),Object.keys(x).map((function(e,t){return e===C.f?l.a.createElement(r.a,{fluid:!0,key:t},l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(I,null,"Possessori"))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:9,sm:12},x[C.f].map((function(e,t){return l.a.createElement("p",{align:"justify",key:t},e)}))))):x[e].map((function(a,n){var c=a.id,r=a.description,m=a.portion,i=a.registeredBy;return l.a.createElement(M,{key:"".concat(t).concat(n),element:e,description:r,portion:m,id:c,registeredBy:i})}))})))))})),B=Object(s.f)("h5"),z=function(e){var t=e.id,a=Object(h.a)(e,["id"]),o=Object(c.useMemo)((function(){return a[0]&&a[1]?Object(u.a)(Object(u.a)({},a[0]),a[1]):{}}),[a]),E=o.land,f=o.description,g=o.documents,b=o.price,j=o.periodicity,p=o.duration,y=o.expectedProduction,S=o.expectedMaintenanceCost,w=o.expectedProdActivityCost,I=Object(c.useState)(!1),z=Object(n.a)(I,2),F=z[0],A=z[1],U=Object(c.useState)(!1),M=Object(n.a)(U,2),J=M[0],T=M[1],W=Object(c.useState)(!1),_=Object(n.a)(W,2),L=_[0],R=_[1],q=Object(c.useCallback)((function(){R((function(e){return!e}))}),[R]),G=Object(c.useMemo)((function(){return L?k.faChevronUp:v.faChevronDown}),[L]);return l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"align-items-center justify-content-end my-3"},l.a.createElement(i.a,{xl:9,sm:12,align:"end"},l.a.createElement(D,{setIsOpen:T,isOpen:J,id:t}))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Terreno")),l.a.createElement(i.a,null,l.a.createElement(P,{id:E,isOpen:F,setIsOpen:A,element:C.c}))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Descrizione")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},f))),g&&l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Documenti")),l.a.createElement(i.a,null,l.a.createElement(d.a,{flush:!0},l.a.createElement(O.a,{className:"text-success",tag:"a",href:g,target:"_blank"},"Documento allegato")))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{align:"center"},l.a.createElement(s.c,{color:"link",onClick:q},"Dati del contratto ",l.a.createElement(x.a,{icon:G})))),l.a.createElement(N.a,{isOpen:L},l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Canone")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},"\u20ac ",b&&(parseInt(b)/100).toFixed(2)))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Durata")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},p?"Fino al ".concat(new Date(parseInt(p)).toLocaleDateString()):"Perpetua"))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Produzione attesa")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},y))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Periodicit\xe0")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},j))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Costi di manutenzione attesi")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},"\u20ac ",S&&(parseInt(S)/100).toFixed(2)))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(B,null,"Costi di produzione attesi")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},"\u20ac ",w&&(parseInt(w)/100).toFixed(2))))))},P=Object(E.b)((function(e){return{user:w.a.getUser(e)}}))((function(e){var t=e.id,a=e.isOpen,E=e.setIsOpen,d=e.element,O=e.user.data,p=O.username,h=(O.attributes,p),N=Object(c.useState)({}),x=Object(n.a)(N,2),v=x[0],k=x[1],w=Object(c.useState)(!1),I=Object(n.a)(w,2),D=I[0],B=I[1],P=Object(c.useState)(!1),F=Object(n.a)(P,2),A=F[0],U=F[1],M=Object(c.useCallback)((function(){(E((function(e){return!e})),a)||(B(!0),new window.web3.eth.Contract(S.a[d].ABI,S.a[d].address).methods.getById(t).call({from:h}).then((function(e){k(Object(u.a)(Object(u.a)({},e),{},{id:t})),B(!1)})).catch((function(e){U(!0),B(!1)})))}),[t,h,d,a,E,B,k]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.c,{color:"link",onClick:M},d," #",t),l.a.createElement(f.a,{className:"modal-lg",isOpen:a,toggle:M},l.a.createElement(g.a,{toggle:M},"Dettagli ",d," #",t),l.a.createElement(b.a,null,D&&l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(i.a,{xl:1,sm:1},l.a.createElement(s.e,{size:"large"})))),A&&l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(i.a,{xl:12,sm:12},l.a.createElement(j.a,{color:"danger",className:"my-3"},"Si \xe8 verificato un errore nel caricamento degli elementi")))),function(e){var t;return t={},Object(o.a)(t,C.c,l.a.createElement(y,e)),Object(o.a)(t,C.f,l.a.createElement(z,e)),t}(v)[d])))})),F=Object(s.f)("h5"),A=Object(E.b)((function(e){return{user:w.a.getUser(e)}}))((function(e){var t=e.id,a=e.isOpen,u=e.setIsOpen,o=e.element,E=e.user.data,p=E.username,y=(E.attributes,p),h=Object(c.useState)([]),N=Object(n.a)(h,2),x=N[0],v=N[1],k=Object(c.useState)(!1),C=Object(n.a)(k,2),w=C[0],I=C[1],D=Object(c.useState)(!1),B=Object(n.a)(D,2),z=B[0],P=B[1],A=Object(c.useCallback)((function(){if(u((function(e){return!e})),!a){I(!0);var e=new window.web3.eth.Contract(S.a[o].ABI,S.a[o].address);e.methods.getByItem(t).call({from:y}).then((function(t){t.length?z||t.forEach((function(a,n){e.methods.getCertificationById(a).call({from:y}).then((function(e){v((function(t){return t.push(e),t})),n===t.length-1&&I(!1)})).catch((function(e){P(!0),I(!1)}))})):I(!1)})).catch((function(e){P(!0),I(!1)}))}}),[t,y,o,a,u,I,v,z,P]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{onClick:A},"Sfoglia cronologia"),l.a.createElement(f.a,{className:"modal-lg",isOpen:a,toggle:A},l.a.createElement(g.a,{toggle:A},"Dettagli ",o," #",t),l.a.createElement(b.a,null,w&&l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(i.a,{xl:1,sm:1},l.a.createElement(s.e,{size:"large"})))),z&&l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"justify-content-center align-content-center align-items-center"},l.a.createElement(i.a,{xl:12,sm:12},l.a.createElement(j.a,{color:"danger",className:"my-3"},"Si \xe8 verificato un errore nel caricamento degli elementi")))),l.a.createElement(d.a,{flush:!0},x.map((function(e,t){var a=e.description,n=e.certifier;return l.a.createElement(O.a,{key:t},l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"my-3"},l.a.createElement(i.a,null,l.a.createElement("h6",{className:"text-black-50"},"Certificazione"))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(F,null,"Descrizione")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},a))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(F,null,"Certificato da")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},n)))))}))))))})),U=Object(s.f)("h5"),M=function(e){var t=e.id,a=e.portion,s=e.description,u=e.registeredBy,o=e.element,E=Object(c.useState)(!1),f=Object(n.a)(E,2),g=f[0],b=f[1],j=Object(c.useState)(!1),d=Object(n.a)(j,2),O=d[0],p=d[1];return l.a.createElement(r.a,{fluid:!0},l.a.createElement(m.a,{className:"my-3"},l.a.createElement(i.a,null,l.a.createElement("h6",{className:"text-black-50"},o))),l.a.createElement(m.a,{className:"align-items-center justify-content-end my-3"},l.a.createElement(i.a,{xl:9,sm:12,align:"end"},l.a.createElement(A,{id:t,isOpen:O,setIsOpen:p,element:o}))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(U,null,"Porzione")),l.a.createElement(i.a,null,l.a.createElement(P,{id:a,isOpen:g,setIsOpen:b,element:C.f}))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(U,null,"Descrizione")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},s))),l.a.createElement(m.a,{className:"align-items-center my-3"},l.a.createElement(i.a,{xl:3,sm:12},l.a.createElement(U,null,"Registrato da")),l.a.createElement(i.a,null,l.a.createElement("p",{align:"justify"},u))))}},668:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(147),c=a(2),l=a.n(c),r=a(783),m=a(784),i=a(787),s=a(786),u=function(e){var t=e.elements,a=e.currentElement,u=e.setCurrentElement,o=Object(c.useState)(!1),E=Object(n.a)(o,2),f=E[0],g=E[1],b=Object(c.useCallback)((function(){return g((function(e){return!e}))}),[g]),j=Object(c.useCallback)((function(e){return function(){u(e)}}),[u]),d=Object(c.useMemo)((function(){return t.map((function(e,t){return l.a.createElement(r.a,{disabled:e.disabled,onClick:j(e.type),key:t},e.type)}))}),[j,t]);return l.a.createElement(m.a,{isOpen:f,toggle:b},l.a.createElement(i.a,{caret:!0,block:!0},a),l.a.createElement(s.a,null,d))}}}]);
//# sourceMappingURL=12.5d5ea33e.chunk.js.map